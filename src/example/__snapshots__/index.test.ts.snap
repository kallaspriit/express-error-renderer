// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`create-user-route can be configured not to show error details 1`] = `"Error message"`;

exports[`create-user-route can be configured not to show message 1`] = `"Internal error occurred"`;

exports[`create-user-route can be configured to show message 1`] = `"Test error"`;

exports[`create-user-route can use default config 1`] = `
"
    <html>
    <head>
      <meta charset=\\"utf-8\\"/>
      <title>Error</title>

      <style>/* http://meyerweb.com/eric/tools/css/reset/
   v2.0 | 20110126
   License: none (public domain)
*/

html,
body,
div,
span,
applet,
object,
iframe,
h1,
h2,
h3,
h4,
h5,
h6,
p,
blockquote,
pre,
a,
abbr,
acronym,
address,
big,
cite,
code,
del,
dfn,
em,
img,
ins,
kbd,
q,
s,
samp,
small,
strike,
strong,
sub,
sup,
tt,
var,
b,
u,
i,
center,
dl,
dt,
dd,
ol,
ul,
li,
fieldset,
form,
label,
legend,
table,
caption,
tbody,
tfoot,
thead,
tr,
th,
td,
article,
aside,
canvas,
details,
embed,
figure,
figcaption,
footer,
header,
hgroup,
menu,
nav,
output,
ruby,
section,
summary,
time,
mark,
audio,
video {
	margin: 0;
	padding: 0;
	border: 0;
	font-size: 100%;
	font: inherit;
	vertical-align: baseline;
}
/* HTML5 display-role reset for older browsers */
article,
aside,
details,
figcaption,
figure,
footer,
header,
hgroup,
menu,
nav,
section {
	display: block;
}
body {
	line-height: 1;
}
ol,
ul {
	list-style: none;
}
blockquote,
q {
	quotes: none;
}
blockquote:before,
blockquote:after,
q:before,
q:after {
	content: '';
	content: none;
}
table {
	border-collapse: collapse;
	border-spacing: 0;
}

/* http://prismjs.com/download.html?themes=prism-okaidia&languages=clike+javascript+typescript&plugins=line-highlight+line-numbers */
/**
 * okaidia theme for JavaScript, CSS and HTML
 * Loosely based on Monokai textmate theme by http://www.monokai.nl/
 * @author ocodia
 */

code[class*='language-'],
pre[class*='language-'] {
	color: #f8f8f2;
	background: none;
	text-shadow: 0 1px rgba(0, 0, 0, 0.3);
	font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	word-wrap: normal;
	line-height: 1.5;

	-moz-tab-size: 4;
	-o-tab-size: 4;
	tab-size: 4;

	-webkit-hyphens: none;
	-moz-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
}

/* Code blocks */
pre[class*='language-'] {
	padding: 1em;
	margin: 0.5em 0;
	overflow: auto;
	border-radius: 0.3em;
}

:not(pre) > code[class*='language-'],
pre[class*='language-'] {
	background: #272822;
}

/* Inline code */
:not(pre) > code[class*='language-'] {
	padding: 0.1em;
	border-radius: 0.3em;
	white-space: normal;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
	color: slategray;
}

.token.punctuation {
	color: #f8f8f2;
}

.namespace {
	opacity: 0.7;
}

.token.property,
.token.tag,
.token.constant,
.token.symbol,
.token.deleted {
	color: #f92672;
}

.token.boolean,
.token.number {
	color: #ae81ff;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
	color: #a6e22e;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string,
.token.variable {
	color: #f8f8f2;
}

.token.atrule,
.token.attr-value,
.token.function {
	color: #e6db74;
}

.token.keyword {
	color: #66d9ef;
}

.token.regex,
.token.important {
	color: #fd971f;
}

.token.important,
.token.bold {
	font-weight: bold;
}
.token.italic {
	font-style: italic;
}

.token.entity {
	cursor: help;
}

pre[data-line] {
	position: relative;
	padding: 1em 0 1em 3em;
}

.line-highlight {
	position: absolute;
	left: 0;
	right: 0;
	padding: inherit 0;
	margin-top: 1em; /* Same as .prismâ€™s padding-top */

	background: hsla(24, 20%, 50%, 0.08);
	background: linear-gradient(to right, hsla(24, 20%, 50%, 0.1) 70%, hsla(24, 20%, 50%, 0));

	pointer-events: none;

	line-height: inherit;
	white-space: pre;
}

.line-highlight:before,
.line-highlight[data-end]:after {
	content: attr(data-start);
	position: absolute;
	top: 0.4em;
	left: 0.6em;
	min-width: 1em;
	padding: 0 0.5em;
	background-color: hsla(24, 20%, 50%, 0.4);
	color: hsl(24, 20%, 95%);
	font: bold 65%/1.5 sans-serif;
	text-align: center;
	vertical-align: 0.3em;
	border-radius: 999px;
	text-shadow: none;
	box-shadow: 0 1px white;
}

.line-highlight[data-end]:after {
	content: attr(data-end);
	top: auto;
	bottom: 0.4em;
}

pre.line-numbers {
	position: relative;
	padding-left: 3.8em;
	counter-reset: linenumber;
}

pre.line-numbers > code {
	position: relative;
	white-space: inherit;
}

.line-numbers .line-numbers-rows {
	position: absolute;
	pointer-events: none;
	top: 0;
	font-size: 100%;
	left: -3.8em;
	width: 3em; /* works for line-numbers below 1000 lines */
	letter-spacing: -1px;
	border-right: 1px solid #999;

	-webkit-user-select: none;
	-moz-user-select: none;
	-ms-user-select: none;
	user-select: none;
}

.line-numbers-rows > span {
	pointer-events: none;
	display: block;
	counter-increment: linenumber;
}

.line-numbers-rows > span:before {
	content: counter(linenumber);
	color: #999;
	display: block;
	padding-right: 0.8em;
	text-align: right;
}
</style>
      <script>/* http://prismjs.com/download.html?themes=prism-okaidia&languages=clike+javascript+typescript&plugins=line-highlight+line-numbers */
var _self=\\"undefined\\"!=typeof window?window:\\"undefined\\"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},Prism=function(){var e=/\\\\blang(?:uage)?-(\\\\w+)\\\\b/i,t=0,n=_self.Prism={manual:_self.Prism&&_self.Prism.manual,util:{encode:function(e){return e instanceof a?new a(e.type,n.util.encode(e.content),e.alias):\\"Array\\"===n.util.type(e)?e.map(n.util.encode):e.replace(/&/g,\\"&amp;\\").replace(/</g,\\"&lt;\\").replace(/\\\\u00a0/g,\\" \\")},type:function(e){return Object.prototype.toString.call(e).match(/\\\\[object (\\\\w+)\\\\]/)[1]},objId:function(e){return e.__id||Object.defineProperty(e,\\"__id\\",{value:++t}),e.__id},clone:function(e){var t=n.util.type(e);switch(t){case\\"Object\\":var a={};for(var r in e)e.hasOwnProperty(r)&&(a[r]=n.util.clone(e[r]));return a;case\\"Array\\":return e.map(function(e){return n.util.clone(e)})}return e}},languages:{extend:function(e,t){var a=n.util.clone(n.languages[e]);for(var r in t)a[r]=t[r];return a},insertBefore:function(e,t,a,r){r=r||n.languages;var i=r[e];if(2==arguments.length){a=arguments[1];for(var l in a)a.hasOwnProperty(l)&&(i[l]=a[l]);return i}var o={};for(var s in i)if(i.hasOwnProperty(s)){if(s==t)for(var l in a)a.hasOwnProperty(l)&&(o[l]=a[l]);o[s]=i[s]}return n.languages.DFS(n.languages,function(t,n){n===r[e]&&t!=e&&(this[t]=o)}),r[e]=o},DFS:function(e,t,a,r){r=r||{};for(var i in e)e.hasOwnProperty(i)&&(t.call(e,i,e[i],a||i),\\"Object\\"!==n.util.type(e[i])||r[n.util.objId(e[i])]?\\"Array\\"!==n.util.type(e[i])||r[n.util.objId(e[i])]||(r[n.util.objId(e[i])]=!0,n.languages.DFS(e[i],t,i,r)):(r[n.util.objId(e[i])]=!0,n.languages.DFS(e[i],t,null,r)))}},plugins:{},highlightAll:function(e,t){var a={callback:t,selector:'code[class*=\\"language-\\"], [class*=\\"language-\\"] code, code[class*=\\"lang-\\"], [class*=\\"lang-\\"] code'};n.hooks.run(\\"before-highlightall\\",a);for(var r,i=a.elements||document.querySelectorAll(a.selector),l=0;r=i[l++];)n.highlightElement(r,e===!0,a.callback)},highlightElement:function(t,a,r){for(var i,l,o=t;o&&!e.test(o.className);)o=o.parentNode;o&&(i=(o.className.match(e)||[,\\"\\"])[1].toLowerCase(),l=n.languages[i]),t.className=t.className.replace(e,\\"\\").replace(/\\\\s+/g,\\" \\")+\\" language-\\"+i,o=t.parentNode,/pre/i.test(o.nodeName)&&(o.className=o.className.replace(e,\\"\\").replace(/\\\\s+/g,\\" \\")+\\" language-\\"+i);var s=t.textContent,u={element:t,language:i,grammar:l,code:s};if(n.hooks.run(\\"before-sanity-check\\",u),!u.code||!u.grammar)return u.code&&(n.hooks.run(\\"before-highlight\\",u),u.element.textContent=u.code,n.hooks.run(\\"after-highlight\\",u)),n.hooks.run(\\"complete\\",u),void 0;if(n.hooks.run(\\"before-highlight\\",u),a&&_self.Worker){var g=new Worker(n.filename);g.onmessage=function(e){u.highlightedCode=e.data,n.hooks.run(\\"before-insert\\",u),u.element.innerHTML=u.highlightedCode,r&&r.call(u.element),n.hooks.run(\\"after-highlight\\",u),n.hooks.run(\\"complete\\",u)},g.postMessage(JSON.stringify({language:u.language,code:u.code,immediateClose:!0}))}else u.highlightedCode=n.highlight(u.code,u.grammar,u.language),n.hooks.run(\\"before-insert\\",u),u.element.innerHTML=u.highlightedCode,r&&r.call(t),n.hooks.run(\\"after-highlight\\",u),n.hooks.run(\\"complete\\",u)},highlight:function(e,t,r){var i=n.tokenize(e,t);return a.stringify(n.util.encode(i),r)},matchGrammar:function(e,t,a,r,i,l,o){var s=n.Token;for(var u in a)if(a.hasOwnProperty(u)&&a[u]){if(u==o)return;var g=a[u];g=\\"Array\\"===n.util.type(g)?g:[g];for(var c=0;c<g.length;++c){var h=g[c],f=h.inside,d=!!h.lookbehind,m=!!h.greedy,p=0,y=h.alias;if(m&&!h.pattern.global){var v=h.pattern.toString().match(/[imuy]*$/)[0];h.pattern=RegExp(h.pattern.source,v+\\"g\\")}h=h.pattern||h;for(var b=r,k=i;b<t.length;k+=t[b].length,++b){var w=t[b];if(t.length>e.length)return;if(!(w instanceof s)){h.lastIndex=0;var _=h.exec(w),P=1;if(!_&&m&&b!=t.length-1){if(h.lastIndex=k,_=h.exec(e),!_)break;for(var A=_.index+(d?_[1].length:0),j=_.index+_[0].length,x=b,O=k,S=t.length;S>x&&(j>O||!t[x].type&&!t[x-1].greedy);++x)O+=t[x].length,A>=O&&(++b,k=O);if(t[b]instanceof s||t[x-1].greedy)continue;P=x-b,w=e.slice(k,O),_.index-=k}if(_){d&&(p=_[1].length);var A=_.index+p,_=_[0].slice(p),j=A+_.length,N=w.slice(0,A),C=w.slice(j),E=[b,P];N&&(++b,k+=N.length,E.push(N));var I=new s(u,f?n.tokenize(_,f):_,y,_,m);if(E.push(I),C&&E.push(C),Array.prototype.splice.apply(t,E),1!=P&&n.matchGrammar(e,t,a,b,k,!0,u),l)break}else if(l)break}}}}},tokenize:function(e,t){var a=[e],r=t.rest;if(r){for(var i in r)t[i]=r[i];delete t.rest}return n.matchGrammar(e,a,t,0,0,!1),a},hooks:{all:{},add:function(e,t){var a=n.hooks.all;a[e]=a[e]||[],a[e].push(t)},run:function(e,t){var a=n.hooks.all[e];if(a&&a.length)for(var r,i=0;r=a[i++];)r(t)}}},a=n.Token=function(e,t,n,a,r){this.type=e,this.content=t,this.alias=n,this.length=0|(a||\\"\\").length,this.greedy=!!r};if(a.stringify=function(e,t,r){if(\\"string\\"==typeof e)return e;if(\\"Array\\"===n.util.type(e))return e.map(function(n){return a.stringify(n,t,e)}).join(\\"\\");var i={type:e.type,content:a.stringify(e.content,t,r),tag:\\"span\\",classes:[\\"token\\",e.type],attributes:{},language:t,parent:r};if(\\"comment\\"==i.type&&(i.attributes.spellcheck=\\"true\\"),e.alias){var l=\\"Array\\"===n.util.type(e.alias)?e.alias:[e.alias];Array.prototype.push.apply(i.classes,l)}n.hooks.run(\\"wrap\\",i);var o=Object.keys(i.attributes).map(function(e){return e+'=\\"'+(i.attributes[e]||\\"\\").replace(/\\"/g,\\"&quot;\\")+'\\"'}).join(\\" \\");return\\"<\\"+i.tag+' class=\\"'+i.classes.join(\\" \\")+'\\"'+(o?\\" \\"+o:\\"\\")+\\">\\"+i.content+\\"</\\"+i.tag+\\">\\"},!_self.document)return _self.addEventListener?(_self.addEventListener(\\"message\\",function(e){var t=JSON.parse(e.data),a=t.language,r=t.code,i=t.immediateClose;_self.postMessage(n.highlight(r,n.languages[a],a)),i&&_self.close()},!1),_self.Prism):_self.Prism;var r=document.currentScript||[].slice.call(document.getElementsByTagName(\\"script\\")).pop();return r&&(n.filename=r.src,n.manual||r.hasAttribute(\\"data-manual\\")||(\\"loading\\"!==document.readyState?window.requestAnimationFrame?window.requestAnimationFrame(n.highlightAll):window.setTimeout(n.highlightAll,16):document.addEventListener(\\"DOMContentLoaded\\",n.highlightAll))),_self.Prism}();\\"undefined\\"!=typeof module&&module.exports&&(module.exports=Prism),\\"undefined\\"!=typeof global&&(global.Prism=Prism);
Prism.languages.clike={comment:[{pattern:/(^|[^\\\\\\\\])\\\\/\\\\*[\\\\s\\\\S]*?(?:\\\\*\\\\/|$)/,lookbehind:!0},{pattern:/(^|[^\\\\\\\\:])\\\\/\\\\/.*/,lookbehind:!0}],string:{pattern:/([\\"'])(\\\\\\\\(?:\\\\r\\\\n|[\\\\s\\\\S])|(?!\\\\1)[^\\\\\\\\\\\\r\\\\n])*\\\\1/,greedy:!0},\\"class-name\\":{pattern:/((?:\\\\b(?:class|interface|extends|implements|trait|instanceof|new)\\\\s+)|(?:catch\\\\s+\\\\())[a-z0-9_\\\\.\\\\\\\\]+/i,lookbehind:!0,inside:{punctuation:/(\\\\.|\\\\\\\\)/}},keyword:/\\\\b(if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\\\\b/,\\"boolean\\":/\\\\b(true|false)\\\\b/,\\"function\\":/[a-z0-9_]+(?=\\\\()/i,number:/\\\\b-?(?:0x[\\\\da-f]+|\\\\d*\\\\.?\\\\d+(?:e[+-]?\\\\d+)?)\\\\b/i,operator:/--?|\\\\+\\\\+?|!=?=?|<=?|>=?|==?=?|&&?|\\\\|\\\\|?|\\\\?|\\\\*|\\\\/|~|\\\\^|%/,punctuation:/[{}[\\\\];(),.:]/};
Prism.languages.javascript=Prism.languages.extend(\\"clike\\",{keyword:/\\\\b(as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|var|void|while|with|yield)\\\\b/,number:/\\\\b-?(0[xX][\\\\dA-Fa-f]+|0[bB][01]+|0[oO][0-7]+|\\\\d*\\\\.?\\\\d+([Ee][+-]?\\\\d+)?|NaN|Infinity)\\\\b/,\\"function\\":/[_$a-zA-Z\\\\xA0-\\\\uFFFF][_$a-zA-Z0-9\\\\xA0-\\\\uFFFF]*(?=\\\\()/i,operator:/-[-=]?|\\\\+[+=]?|!=?=?|<<?=?|>>?>?=?|=(?:==?|>)?|&[&=]?|\\\\|[|=]?|\\\\*\\\\*?=?|\\\\/=?|~|\\\\^=?|%=?|\\\\?|\\\\.{3}/}),Prism.languages.insertBefore(\\"javascript\\",\\"keyword\\",{regex:{pattern:/(^|[^\\\\/])\\\\/(?!\\\\/)(\\\\[[^\\\\]\\\\r\\\\n]+]|\\\\\\\\.|[^\\\\/\\\\\\\\\\\\[\\\\r\\\\n])+\\\\/[gimyu]{0,5}(?=\\\\s*($|[\\\\r\\\\n,.;})]))/,lookbehind:!0,greedy:!0}}),Prism.languages.insertBefore(\\"javascript\\",\\"string\\",{\\"template-string\\":{pattern:/\`(?:\\\\\\\\\\\\\\\\|\\\\\\\\?[^\\\\\\\\])*?\`/,greedy:!0,inside:{interpolation:{pattern:/\\\\$\\\\{[^}]+\\\\}/,inside:{\\"interpolation-punctuation\\":{pattern:/^\\\\$\\\\{|\\\\}$/,alias:\\"punctuation\\"},rest:Prism.languages.javascript}},string:/[\\\\s\\\\S]+/}}}),Prism.languages.markup&&Prism.languages.insertBefore(\\"markup\\",\\"tag\\",{script:{pattern:/(<script[\\\\s\\\\S]*?>)[\\\\s\\\\S]*?(?=<\\\\/script>)/i,lookbehind:!0,inside:Prism.languages.javascript,alias:\\"language-javascript\\"}}),Prism.languages.js=Prism.languages.javascript;
Prism.languages.typescript=Prism.languages.extend(\\"javascript\\",{keyword:/\\\\b(as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|var|void|while|with|yield|false|true|module|declare|constructor|string|Function|any|number|boolean|Array|enum|symbol|namespace|abstract|require|type)\\\\b/}),Prism.languages.ts=Prism.languages.typescript;
!function(){function e(e,t){return Array.prototype.slice.call((t||document).querySelectorAll(e))}function t(e,t){return t=\\" \\"+t+\\" \\",(\\" \\"+e.className+\\" \\").replace(/[\\\\n\\\\t]/g,\\" \\").indexOf(t)>-1}function n(e,n,i){for(var o,a=n.replace(/\\\\s+/g,\\"\\").split(\\",\\"),l=+e.getAttribute(\\"data-line-offset\\")||0,d=r()?parseInt:parseFloat,c=d(getComputedStyle(e).lineHeight),s=0;o=a[s++];){o=o.split(\\"-\\");var u=+o[0],m=+o[1]||u,h=document.createElement(\\"div\\");h.textContent=Array(m-u+2).join(\\" \\\\n\\"),h.setAttribute(\\"aria-hidden\\",\\"true\\"),h.className=(i||\\"\\")+\\" line-highlight\\",t(e,\\"line-numbers\\")||(h.setAttribute(\\"data-start\\",u),m>u&&h.setAttribute(\\"data-end\\",m)),h.style.top=(u-l-1)*c+\\"px\\",t(e,\\"line-numbers\\")?e.appendChild(h):(e.querySelector(\\"code\\")||e).appendChild(h)}}function i(){var t=location.hash.slice(1);e(\\".temporary.line-highlight\\").forEach(function(e){e.parentNode.removeChild(e)});var i=(t.match(/\\\\.([\\\\d,-]+)$/)||[,\\"\\"])[1];if(i&&!document.getElementById(t)){var r=t.slice(0,t.lastIndexOf(\\".\\")),o=document.getElementById(r);o&&(o.hasAttribute(\\"data-line\\")||o.setAttribute(\\"data-line\\",\\"\\"),n(o,i,\\"temporary \\"),document.querySelector(\\".temporary.line-highlight\\").scrollIntoView())}}if(\\"undefined\\"!=typeof self&&self.Prism&&self.document&&document.querySelector){var r=function(){var e;return function(){if(\\"undefined\\"==typeof e){var t=document.createElement(\\"div\\");t.style.fontSize=\\"13px\\",t.style.lineHeight=\\"1.5\\",t.style.padding=0,t.style.border=0,t.innerHTML=\\"&nbsp;<br />&nbsp;\\",document.body.appendChild(t),e=38===t.offsetHeight,document.body.removeChild(t)}return e}}(),o=0;Prism.hooks.add(\\"before-sanity-check\\",function(t){var n=t.element.parentNode,i=n&&n.getAttribute(\\"data-line\\");if(n&&i&&/pre/i.test(n.nodeName)){var r=0;e(\\".line-highlight\\",n).forEach(function(e){r+=e.textContent.length,e.parentNode.removeChild(e)}),r&&/^( \\\\n)+$/.test(t.code.slice(-r))&&(t.code=t.code.slice(0,-r))}}),Prism.hooks.add(\\"complete\\",function(e){var t=e.element.parentNode,r=t&&t.getAttribute(\\"data-line\\");t&&r&&/pre/i.test(t.nodeName)&&(clearTimeout(o),n(t,r),o=setTimeout(i,1))}),window.addEventListener(\\"hashchange\\",i)}}();
!function(){if(\\"undefined\\"!=typeof self&&self.Prism&&self.document){var e=\\"line-numbers\\",t=function(e){var t=n(e),r=t[\\"white-space\\"];if(\\"pre-wrap\\"===r||\\"pre-line\\"===r){var s=e.querySelector(\\"code\\"),l=e.querySelector(\\".line-numbers-rows\\"),a=e.querySelector(\\".line-numbers-sizer\\"),i=e.textContent.split(\\"\\\\n\\");a||(a=document.createElement(\\"span\\"),a.className=\\"line-numbers-sizer\\",s.appendChild(a)),a.style.display=\\"block\\",i.forEach(function(e,t){a.textContent=e||\\"\\\\n\\";var n=a.getBoundingClientRect().height;l.children[t].style.height=n+\\"px\\"}),a.textContent=\\"\\",a.style.display=\\"none\\"}},n=function(e){return e?window.getComputedStyle?getComputedStyle(e):e.currentStyle||null:null};window.addEventListener(\\"resize\\",function(){Array.prototype.forEach.call(document.querySelectorAll(\\"pre.\\"+e),t)}),Prism.hooks.add(\\"complete\\",function(e){if(e.code){var n=e.element.parentNode,r=/\\\\s*\\\\bline-numbers\\\\b\\\\s*/;if(n&&/pre/i.test(n.nodeName)&&(r.test(n.className)||r.test(e.element.className))&&!e.element.querySelector(\\".line-numbers-rows\\")){r.test(e.element.className)&&(e.element.className=e.element.className.replace(r,\\" \\")),r.test(n.className)||(n.className+=\\" line-numbers\\");var s,l=e.code.match(/\\\\n(?!$)/g),a=l?l.length+1:1,i=new Array(a+1);i=i.join(\\"<span></span>\\"),s=document.createElement(\\"span\\"),s.setAttribute(\\"aria-hidden\\",\\"true\\"),s.className=\\"line-numbers-rows\\",s.innerHTML=i,n.hasAttribute(\\"data-start\\")&&(n.style.counterReset=\\"linenumber \\"+(parseInt(n.getAttribute(\\"data-start\\"),10)-1)),e.element.appendChild(s),t(n)}}})}}();
</script>

      <style>
        body {
          background-color: #252526;
          color: #FFF;
          margin: 0;
          padding: 20px;
        }
        .error-message {
          font-family: Consolas, fixed;
          font-size: 120%;
          margin-bottom: 20px;
          border-radius: 5px 5px 0 0;
          display: flex;
          overflow: hidden;
        }
        .error-message__name {
          padding: 20px;
          background-color: #600;
        }
        .error-message__message {
          padding: 20px;
          background-color: #900;
          flex-grow: 1;
        }
        .error-info {
          background-color: #1E1E1E;
          border-radius: 0 0 5px 5px;
          margin-bottom: 20px;
        }
        .error-details {
          white-space: pre;
          font-family: Consolas, fixed;
          font-size: 80%;
          padding: 20px;
          background-color: #111;
        }
        .stack-trace {
          font-family: Consolas, fixed;
          padding: 20px;
        }
        .stack-line {

        }
        .stack-line__match,
        .stack-line__column {
          display: none;
        }
        .stack-frame {
          background-color: #1E1E1E;
          padding: 0;
          margin-bottom: 20px;
          border-radius: 5px;
          overflow: hidden;
        }
        .source-file {
          font-weight: bold;
          font-family: Consolas, fixed;
          padding: 8px 10px;
          background-color: #000;
        }
        .source-file__filename {
          text-decoration: underline;
        }
        .source-lines {
          font-family: Consolas, fixed;
          padding: 0;
          margin: 0;
          color: #5A5A5A;
        }
        .source-lines__line {
          padding: 5px 10px;
          margin: 0;
          white-space: pre;
          list-style: decimal inside none;
        }
        .source-lines__line span {
          color: #FFF;
        }
        .source-lines__line--main {
          background-color: #111;
        }
        .no-context {
          padding: 20px;
        }
        .source-code {
          padding-left: 0 !important;
          margin: 0 !important;
          background-color: transparent !important;
        }
        .source-code code {
          display: inline-block;
        }
      </style>
    </head>
    <body>
      <div class=\\"error-info\\">
        <div class=\\"error-message\\">
          <div class=\\"error-message__name\\">Error</div>
          <div class=\\"error-message__message\\">Error message</div>
        </div>
        
    <ol class=\\"stack-trace\\">
      
    <li>
      <span class=\\"stack-line__source\\">express-error-renderer/src/example/index.test.ts:71</span>
      <span class=\\"stack-line__method\\">(server.get)</span>
    </li>
  
    </ol>
  
        
      </div>
      
    <div class=\\"stack-frame\\">
      <div class=\\"source-file\\">
        <span class=\\"source-file__index\\">#1</span>
        <span class=\\"source-file__filename\\">express-error-renderer/src/example/index.test.ts</span>:<span class=\\"source-file__line\\">64</span>
      </div>
      
    <pre class=\\"source-code line-numbers\\" data-start=\\"44\\" data-line=\\"21\\">
      <code class=\\"language-typescript\\">  });

  it(\\"should handle cyclic errors\\", async () => {
    const app = supertest(await setupApp());
    const response = await app.get(\\"/cyclic-error\\");

    expect(response.status).toEqual(HttpStatus.INTERNAL_SERVER_ERROR);
    expect(response.text).toMatchSnapshot();
  });

  it(\\"should return error info as json if requested with XHR\\", async () => {
    const app = supertest(await setupApp());
    const response = await app
      .get(\\"/throw-error\\")
      .set(\\"X-Requested-With\\", \\"XMLHttpRequest\\")
      .send();

    expect(response.status).toEqual(HttpStatus.INTERNAL_SERVER_ERROR);
    expect(response.body.error).toEqual(\\"Thrown error message\\");
    expect(response.body.stack).toBeInstanceOf(Array);
    expect(response.body.stack.length).toBeGreaterThan(0);
  });

  it(\\"can use default config\\", async () => {
    const server = express();

    server.get(\\"/error\\", (_request, _response, _next) => {
      throw new Error(\\"Error message\\");
    });

    server.use(expressErrorRenderer());

    const app = supertest(server);
    const response = await app.get(\\"/error\\");

    expect(response.status).toEqual(HttpStatus.INTERNAL_SERVER_ERROR);
    expect(response.text).toMatchSnapshot();
  });

  it(\\"can be configured not to show error details\\", async () => {
    const server = express();</code></pre>
  
    </div>
  
    </body>
    </html>
  "
`;

exports[`create-user-route error can include additional information 1`] = `
"
    <html>
    <head>
      <meta charset=\\"utf-8\\"/>
      <title>Error</title>

      <style>/* http://meyerweb.com/eric/tools/css/reset/
   v2.0 | 20110126
   License: none (public domain)
*/

html,
body,
div,
span,
applet,
object,
iframe,
h1,
h2,
h3,
h4,
h5,
h6,
p,
blockquote,
pre,
a,
abbr,
acronym,
address,
big,
cite,
code,
del,
dfn,
em,
img,
ins,
kbd,
q,
s,
samp,
small,
strike,
strong,
sub,
sup,
tt,
var,
b,
u,
i,
center,
dl,
dt,
dd,
ol,
ul,
li,
fieldset,
form,
label,
legend,
table,
caption,
tbody,
tfoot,
thead,
tr,
th,
td,
article,
aside,
canvas,
details,
embed,
figure,
figcaption,
footer,
header,
hgroup,
menu,
nav,
output,
ruby,
section,
summary,
time,
mark,
audio,
video {
	margin: 0;
	padding: 0;
	border: 0;
	font-size: 100%;
	font: inherit;
	vertical-align: baseline;
}
/* HTML5 display-role reset for older browsers */
article,
aside,
details,
figcaption,
figure,
footer,
header,
hgroup,
menu,
nav,
section {
	display: block;
}
body {
	line-height: 1;
}
ol,
ul {
	list-style: none;
}
blockquote,
q {
	quotes: none;
}
blockquote:before,
blockquote:after,
q:before,
q:after {
	content: '';
	content: none;
}
table {
	border-collapse: collapse;
	border-spacing: 0;
}

/* http://prismjs.com/download.html?themes=prism-okaidia&languages=clike+javascript+typescript&plugins=line-highlight+line-numbers */
/**
 * okaidia theme for JavaScript, CSS and HTML
 * Loosely based on Monokai textmate theme by http://www.monokai.nl/
 * @author ocodia
 */

code[class*='language-'],
pre[class*='language-'] {
	color: #f8f8f2;
	background: none;
	text-shadow: 0 1px rgba(0, 0, 0, 0.3);
	font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	word-wrap: normal;
	line-height: 1.5;

	-moz-tab-size: 4;
	-o-tab-size: 4;
	tab-size: 4;

	-webkit-hyphens: none;
	-moz-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
}

/* Code blocks */
pre[class*='language-'] {
	padding: 1em;
	margin: 0.5em 0;
	overflow: auto;
	border-radius: 0.3em;
}

:not(pre) > code[class*='language-'],
pre[class*='language-'] {
	background: #272822;
}

/* Inline code */
:not(pre) > code[class*='language-'] {
	padding: 0.1em;
	border-radius: 0.3em;
	white-space: normal;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
	color: slategray;
}

.token.punctuation {
	color: #f8f8f2;
}

.namespace {
	opacity: 0.7;
}

.token.property,
.token.tag,
.token.constant,
.token.symbol,
.token.deleted {
	color: #f92672;
}

.token.boolean,
.token.number {
	color: #ae81ff;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
	color: #a6e22e;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string,
.token.variable {
	color: #f8f8f2;
}

.token.atrule,
.token.attr-value,
.token.function {
	color: #e6db74;
}

.token.keyword {
	color: #66d9ef;
}

.token.regex,
.token.important {
	color: #fd971f;
}

.token.important,
.token.bold {
	font-weight: bold;
}
.token.italic {
	font-style: italic;
}

.token.entity {
	cursor: help;
}

pre[data-line] {
	position: relative;
	padding: 1em 0 1em 3em;
}

.line-highlight {
	position: absolute;
	left: 0;
	right: 0;
	padding: inherit 0;
	margin-top: 1em; /* Same as .prismâ€™s padding-top */

	background: hsla(24, 20%, 50%, 0.08);
	background: linear-gradient(to right, hsla(24, 20%, 50%, 0.1) 70%, hsla(24, 20%, 50%, 0));

	pointer-events: none;

	line-height: inherit;
	white-space: pre;
}

.line-highlight:before,
.line-highlight[data-end]:after {
	content: attr(data-start);
	position: absolute;
	top: 0.4em;
	left: 0.6em;
	min-width: 1em;
	padding: 0 0.5em;
	background-color: hsla(24, 20%, 50%, 0.4);
	color: hsl(24, 20%, 95%);
	font: bold 65%/1.5 sans-serif;
	text-align: center;
	vertical-align: 0.3em;
	border-radius: 999px;
	text-shadow: none;
	box-shadow: 0 1px white;
}

.line-highlight[data-end]:after {
	content: attr(data-end);
	top: auto;
	bottom: 0.4em;
}

pre.line-numbers {
	position: relative;
	padding-left: 3.8em;
	counter-reset: linenumber;
}

pre.line-numbers > code {
	position: relative;
	white-space: inherit;
}

.line-numbers .line-numbers-rows {
	position: absolute;
	pointer-events: none;
	top: 0;
	font-size: 100%;
	left: -3.8em;
	width: 3em; /* works for line-numbers below 1000 lines */
	letter-spacing: -1px;
	border-right: 1px solid #999;

	-webkit-user-select: none;
	-moz-user-select: none;
	-ms-user-select: none;
	user-select: none;
}

.line-numbers-rows > span {
	pointer-events: none;
	display: block;
	counter-increment: linenumber;
}

.line-numbers-rows > span:before {
	content: counter(linenumber);
	color: #999;
	display: block;
	padding-right: 0.8em;
	text-align: right;
}
</style>
      <script>/* http://prismjs.com/download.html?themes=prism-okaidia&languages=clike+javascript+typescript&plugins=line-highlight+line-numbers */
var _self=\\"undefined\\"!=typeof window?window:\\"undefined\\"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},Prism=function(){var e=/\\\\blang(?:uage)?-(\\\\w+)\\\\b/i,t=0,n=_self.Prism={manual:_self.Prism&&_self.Prism.manual,util:{encode:function(e){return e instanceof a?new a(e.type,n.util.encode(e.content),e.alias):\\"Array\\"===n.util.type(e)?e.map(n.util.encode):e.replace(/&/g,\\"&amp;\\").replace(/</g,\\"&lt;\\").replace(/\\\\u00a0/g,\\" \\")},type:function(e){return Object.prototype.toString.call(e).match(/\\\\[object (\\\\w+)\\\\]/)[1]},objId:function(e){return e.__id||Object.defineProperty(e,\\"__id\\",{value:++t}),e.__id},clone:function(e){var t=n.util.type(e);switch(t){case\\"Object\\":var a={};for(var r in e)e.hasOwnProperty(r)&&(a[r]=n.util.clone(e[r]));return a;case\\"Array\\":return e.map(function(e){return n.util.clone(e)})}return e}},languages:{extend:function(e,t){var a=n.util.clone(n.languages[e]);for(var r in t)a[r]=t[r];return a},insertBefore:function(e,t,a,r){r=r||n.languages;var i=r[e];if(2==arguments.length){a=arguments[1];for(var l in a)a.hasOwnProperty(l)&&(i[l]=a[l]);return i}var o={};for(var s in i)if(i.hasOwnProperty(s)){if(s==t)for(var l in a)a.hasOwnProperty(l)&&(o[l]=a[l]);o[s]=i[s]}return n.languages.DFS(n.languages,function(t,n){n===r[e]&&t!=e&&(this[t]=o)}),r[e]=o},DFS:function(e,t,a,r){r=r||{};for(var i in e)e.hasOwnProperty(i)&&(t.call(e,i,e[i],a||i),\\"Object\\"!==n.util.type(e[i])||r[n.util.objId(e[i])]?\\"Array\\"!==n.util.type(e[i])||r[n.util.objId(e[i])]||(r[n.util.objId(e[i])]=!0,n.languages.DFS(e[i],t,i,r)):(r[n.util.objId(e[i])]=!0,n.languages.DFS(e[i],t,null,r)))}},plugins:{},highlightAll:function(e,t){var a={callback:t,selector:'code[class*=\\"language-\\"], [class*=\\"language-\\"] code, code[class*=\\"lang-\\"], [class*=\\"lang-\\"] code'};n.hooks.run(\\"before-highlightall\\",a);for(var r,i=a.elements||document.querySelectorAll(a.selector),l=0;r=i[l++];)n.highlightElement(r,e===!0,a.callback)},highlightElement:function(t,a,r){for(var i,l,o=t;o&&!e.test(o.className);)o=o.parentNode;o&&(i=(o.className.match(e)||[,\\"\\"])[1].toLowerCase(),l=n.languages[i]),t.className=t.className.replace(e,\\"\\").replace(/\\\\s+/g,\\" \\")+\\" language-\\"+i,o=t.parentNode,/pre/i.test(o.nodeName)&&(o.className=o.className.replace(e,\\"\\").replace(/\\\\s+/g,\\" \\")+\\" language-\\"+i);var s=t.textContent,u={element:t,language:i,grammar:l,code:s};if(n.hooks.run(\\"before-sanity-check\\",u),!u.code||!u.grammar)return u.code&&(n.hooks.run(\\"before-highlight\\",u),u.element.textContent=u.code,n.hooks.run(\\"after-highlight\\",u)),n.hooks.run(\\"complete\\",u),void 0;if(n.hooks.run(\\"before-highlight\\",u),a&&_self.Worker){var g=new Worker(n.filename);g.onmessage=function(e){u.highlightedCode=e.data,n.hooks.run(\\"before-insert\\",u),u.element.innerHTML=u.highlightedCode,r&&r.call(u.element),n.hooks.run(\\"after-highlight\\",u),n.hooks.run(\\"complete\\",u)},g.postMessage(JSON.stringify({language:u.language,code:u.code,immediateClose:!0}))}else u.highlightedCode=n.highlight(u.code,u.grammar,u.language),n.hooks.run(\\"before-insert\\",u),u.element.innerHTML=u.highlightedCode,r&&r.call(t),n.hooks.run(\\"after-highlight\\",u),n.hooks.run(\\"complete\\",u)},highlight:function(e,t,r){var i=n.tokenize(e,t);return a.stringify(n.util.encode(i),r)},matchGrammar:function(e,t,a,r,i,l,o){var s=n.Token;for(var u in a)if(a.hasOwnProperty(u)&&a[u]){if(u==o)return;var g=a[u];g=\\"Array\\"===n.util.type(g)?g:[g];for(var c=0;c<g.length;++c){var h=g[c],f=h.inside,d=!!h.lookbehind,m=!!h.greedy,p=0,y=h.alias;if(m&&!h.pattern.global){var v=h.pattern.toString().match(/[imuy]*$/)[0];h.pattern=RegExp(h.pattern.source,v+\\"g\\")}h=h.pattern||h;for(var b=r,k=i;b<t.length;k+=t[b].length,++b){var w=t[b];if(t.length>e.length)return;if(!(w instanceof s)){h.lastIndex=0;var _=h.exec(w),P=1;if(!_&&m&&b!=t.length-1){if(h.lastIndex=k,_=h.exec(e),!_)break;for(var A=_.index+(d?_[1].length:0),j=_.index+_[0].length,x=b,O=k,S=t.length;S>x&&(j>O||!t[x].type&&!t[x-1].greedy);++x)O+=t[x].length,A>=O&&(++b,k=O);if(t[b]instanceof s||t[x-1].greedy)continue;P=x-b,w=e.slice(k,O),_.index-=k}if(_){d&&(p=_[1].length);var A=_.index+p,_=_[0].slice(p),j=A+_.length,N=w.slice(0,A),C=w.slice(j),E=[b,P];N&&(++b,k+=N.length,E.push(N));var I=new s(u,f?n.tokenize(_,f):_,y,_,m);if(E.push(I),C&&E.push(C),Array.prototype.splice.apply(t,E),1!=P&&n.matchGrammar(e,t,a,b,k,!0,u),l)break}else if(l)break}}}}},tokenize:function(e,t){var a=[e],r=t.rest;if(r){for(var i in r)t[i]=r[i];delete t.rest}return n.matchGrammar(e,a,t,0,0,!1),a},hooks:{all:{},add:function(e,t){var a=n.hooks.all;a[e]=a[e]||[],a[e].push(t)},run:function(e,t){var a=n.hooks.all[e];if(a&&a.length)for(var r,i=0;r=a[i++];)r(t)}}},a=n.Token=function(e,t,n,a,r){this.type=e,this.content=t,this.alias=n,this.length=0|(a||\\"\\").length,this.greedy=!!r};if(a.stringify=function(e,t,r){if(\\"string\\"==typeof e)return e;if(\\"Array\\"===n.util.type(e))return e.map(function(n){return a.stringify(n,t,e)}).join(\\"\\");var i={type:e.type,content:a.stringify(e.content,t,r),tag:\\"span\\",classes:[\\"token\\",e.type],attributes:{},language:t,parent:r};if(\\"comment\\"==i.type&&(i.attributes.spellcheck=\\"true\\"),e.alias){var l=\\"Array\\"===n.util.type(e.alias)?e.alias:[e.alias];Array.prototype.push.apply(i.classes,l)}n.hooks.run(\\"wrap\\",i);var o=Object.keys(i.attributes).map(function(e){return e+'=\\"'+(i.attributes[e]||\\"\\").replace(/\\"/g,\\"&quot;\\")+'\\"'}).join(\\" \\");return\\"<\\"+i.tag+' class=\\"'+i.classes.join(\\" \\")+'\\"'+(o?\\" \\"+o:\\"\\")+\\">\\"+i.content+\\"</\\"+i.tag+\\">\\"},!_self.document)return _self.addEventListener?(_self.addEventListener(\\"message\\",function(e){var t=JSON.parse(e.data),a=t.language,r=t.code,i=t.immediateClose;_self.postMessage(n.highlight(r,n.languages[a],a)),i&&_self.close()},!1),_self.Prism):_self.Prism;var r=document.currentScript||[].slice.call(document.getElementsByTagName(\\"script\\")).pop();return r&&(n.filename=r.src,n.manual||r.hasAttribute(\\"data-manual\\")||(\\"loading\\"!==document.readyState?window.requestAnimationFrame?window.requestAnimationFrame(n.highlightAll):window.setTimeout(n.highlightAll,16):document.addEventListener(\\"DOMContentLoaded\\",n.highlightAll))),_self.Prism}();\\"undefined\\"!=typeof module&&module.exports&&(module.exports=Prism),\\"undefined\\"!=typeof global&&(global.Prism=Prism);
Prism.languages.clike={comment:[{pattern:/(^|[^\\\\\\\\])\\\\/\\\\*[\\\\s\\\\S]*?(?:\\\\*\\\\/|$)/,lookbehind:!0},{pattern:/(^|[^\\\\\\\\:])\\\\/\\\\/.*/,lookbehind:!0}],string:{pattern:/([\\"'])(\\\\\\\\(?:\\\\r\\\\n|[\\\\s\\\\S])|(?!\\\\1)[^\\\\\\\\\\\\r\\\\n])*\\\\1/,greedy:!0},\\"class-name\\":{pattern:/((?:\\\\b(?:class|interface|extends|implements|trait|instanceof|new)\\\\s+)|(?:catch\\\\s+\\\\())[a-z0-9_\\\\.\\\\\\\\]+/i,lookbehind:!0,inside:{punctuation:/(\\\\.|\\\\\\\\)/}},keyword:/\\\\b(if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\\\\b/,\\"boolean\\":/\\\\b(true|false)\\\\b/,\\"function\\":/[a-z0-9_]+(?=\\\\()/i,number:/\\\\b-?(?:0x[\\\\da-f]+|\\\\d*\\\\.?\\\\d+(?:e[+-]?\\\\d+)?)\\\\b/i,operator:/--?|\\\\+\\\\+?|!=?=?|<=?|>=?|==?=?|&&?|\\\\|\\\\|?|\\\\?|\\\\*|\\\\/|~|\\\\^|%/,punctuation:/[{}[\\\\];(),.:]/};
Prism.languages.javascript=Prism.languages.extend(\\"clike\\",{keyword:/\\\\b(as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|var|void|while|with|yield)\\\\b/,number:/\\\\b-?(0[xX][\\\\dA-Fa-f]+|0[bB][01]+|0[oO][0-7]+|\\\\d*\\\\.?\\\\d+([Ee][+-]?\\\\d+)?|NaN|Infinity)\\\\b/,\\"function\\":/[_$a-zA-Z\\\\xA0-\\\\uFFFF][_$a-zA-Z0-9\\\\xA0-\\\\uFFFF]*(?=\\\\()/i,operator:/-[-=]?|\\\\+[+=]?|!=?=?|<<?=?|>>?>?=?|=(?:==?|>)?|&[&=]?|\\\\|[|=]?|\\\\*\\\\*?=?|\\\\/=?|~|\\\\^=?|%=?|\\\\?|\\\\.{3}/}),Prism.languages.insertBefore(\\"javascript\\",\\"keyword\\",{regex:{pattern:/(^|[^\\\\/])\\\\/(?!\\\\/)(\\\\[[^\\\\]\\\\r\\\\n]+]|\\\\\\\\.|[^\\\\/\\\\\\\\\\\\[\\\\r\\\\n])+\\\\/[gimyu]{0,5}(?=\\\\s*($|[\\\\r\\\\n,.;})]))/,lookbehind:!0,greedy:!0}}),Prism.languages.insertBefore(\\"javascript\\",\\"string\\",{\\"template-string\\":{pattern:/\`(?:\\\\\\\\\\\\\\\\|\\\\\\\\?[^\\\\\\\\])*?\`/,greedy:!0,inside:{interpolation:{pattern:/\\\\$\\\\{[^}]+\\\\}/,inside:{\\"interpolation-punctuation\\":{pattern:/^\\\\$\\\\{|\\\\}$/,alias:\\"punctuation\\"},rest:Prism.languages.javascript}},string:/[\\\\s\\\\S]+/}}}),Prism.languages.markup&&Prism.languages.insertBefore(\\"markup\\",\\"tag\\",{script:{pattern:/(<script[\\\\s\\\\S]*?>)[\\\\s\\\\S]*?(?=<\\\\/script>)/i,lookbehind:!0,inside:Prism.languages.javascript,alias:\\"language-javascript\\"}}),Prism.languages.js=Prism.languages.javascript;
Prism.languages.typescript=Prism.languages.extend(\\"javascript\\",{keyword:/\\\\b(as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|var|void|while|with|yield|false|true|module|declare|constructor|string|Function|any|number|boolean|Array|enum|symbol|namespace|abstract|require|type)\\\\b/}),Prism.languages.ts=Prism.languages.typescript;
!function(){function e(e,t){return Array.prototype.slice.call((t||document).querySelectorAll(e))}function t(e,t){return t=\\" \\"+t+\\" \\",(\\" \\"+e.className+\\" \\").replace(/[\\\\n\\\\t]/g,\\" \\").indexOf(t)>-1}function n(e,n,i){for(var o,a=n.replace(/\\\\s+/g,\\"\\").split(\\",\\"),l=+e.getAttribute(\\"data-line-offset\\")||0,d=r()?parseInt:parseFloat,c=d(getComputedStyle(e).lineHeight),s=0;o=a[s++];){o=o.split(\\"-\\");var u=+o[0],m=+o[1]||u,h=document.createElement(\\"div\\");h.textContent=Array(m-u+2).join(\\" \\\\n\\"),h.setAttribute(\\"aria-hidden\\",\\"true\\"),h.className=(i||\\"\\")+\\" line-highlight\\",t(e,\\"line-numbers\\")||(h.setAttribute(\\"data-start\\",u),m>u&&h.setAttribute(\\"data-end\\",m)),h.style.top=(u-l-1)*c+\\"px\\",t(e,\\"line-numbers\\")?e.appendChild(h):(e.querySelector(\\"code\\")||e).appendChild(h)}}function i(){var t=location.hash.slice(1);e(\\".temporary.line-highlight\\").forEach(function(e){e.parentNode.removeChild(e)});var i=(t.match(/\\\\.([\\\\d,-]+)$/)||[,\\"\\"])[1];if(i&&!document.getElementById(t)){var r=t.slice(0,t.lastIndexOf(\\".\\")),o=document.getElementById(r);o&&(o.hasAttribute(\\"data-line\\")||o.setAttribute(\\"data-line\\",\\"\\"),n(o,i,\\"temporary \\"),document.querySelector(\\".temporary.line-highlight\\").scrollIntoView())}}if(\\"undefined\\"!=typeof self&&self.Prism&&self.document&&document.querySelector){var r=function(){var e;return function(){if(\\"undefined\\"==typeof e){var t=document.createElement(\\"div\\");t.style.fontSize=\\"13px\\",t.style.lineHeight=\\"1.5\\",t.style.padding=0,t.style.border=0,t.innerHTML=\\"&nbsp;<br />&nbsp;\\",document.body.appendChild(t),e=38===t.offsetHeight,document.body.removeChild(t)}return e}}(),o=0;Prism.hooks.add(\\"before-sanity-check\\",function(t){var n=t.element.parentNode,i=n&&n.getAttribute(\\"data-line\\");if(n&&i&&/pre/i.test(n.nodeName)){var r=0;e(\\".line-highlight\\",n).forEach(function(e){r+=e.textContent.length,e.parentNode.removeChild(e)}),r&&/^( \\\\n)+$/.test(t.code.slice(-r))&&(t.code=t.code.slice(0,-r))}}),Prism.hooks.add(\\"complete\\",function(e){var t=e.element.parentNode,r=t&&t.getAttribute(\\"data-line\\");t&&r&&/pre/i.test(t.nodeName)&&(clearTimeout(o),n(t,r),o=setTimeout(i,1))}),window.addEventListener(\\"hashchange\\",i)}}();
!function(){if(\\"undefined\\"!=typeof self&&self.Prism&&self.document){var e=\\"line-numbers\\",t=function(e){var t=n(e),r=t[\\"white-space\\"];if(\\"pre-wrap\\"===r||\\"pre-line\\"===r){var s=e.querySelector(\\"code\\"),l=e.querySelector(\\".line-numbers-rows\\"),a=e.querySelector(\\".line-numbers-sizer\\"),i=e.textContent.split(\\"\\\\n\\");a||(a=document.createElement(\\"span\\"),a.className=\\"line-numbers-sizer\\",s.appendChild(a)),a.style.display=\\"block\\",i.forEach(function(e,t){a.textContent=e||\\"\\\\n\\";var n=a.getBoundingClientRect().height;l.children[t].style.height=n+\\"px\\"}),a.textContent=\\"\\",a.style.display=\\"none\\"}},n=function(e){return e?window.getComputedStyle?getComputedStyle(e):e.currentStyle||null:null};window.addEventListener(\\"resize\\",function(){Array.prototype.forEach.call(document.querySelectorAll(\\"pre.\\"+e),t)}),Prism.hooks.add(\\"complete\\",function(e){if(e.code){var n=e.element.parentNode,r=/\\\\s*\\\\bline-numbers\\\\b\\\\s*/;if(n&&/pre/i.test(n.nodeName)&&(r.test(n.className)||r.test(e.element.className))&&!e.element.querySelector(\\".line-numbers-rows\\")){r.test(e.element.className)&&(e.element.className=e.element.className.replace(r,\\" \\")),r.test(n.className)||(n.className+=\\" line-numbers\\");var s,l=e.code.match(/\\\\n(?!$)/g),a=l?l.length+1:1,i=new Array(a+1);i=i.join(\\"<span></span>\\"),s=document.createElement(\\"span\\"),s.setAttribute(\\"aria-hidden\\",\\"true\\"),s.className=\\"line-numbers-rows\\",s.innerHTML=i,n.hasAttribute(\\"data-start\\")&&(n.style.counterReset=\\"linenumber \\"+(parseInt(n.getAttribute(\\"data-start\\"),10)-1)),e.element.appendChild(s),t(n)}}})}}();
</script>

      <style>
        body {
          background-color: #252526;
          color: #FFF;
          margin: 0;
          padding: 20px;
        }
        .error-message {
          font-family: Consolas, fixed;
          font-size: 120%;
          margin-bottom: 20px;
          border-radius: 5px 5px 0 0;
          display: flex;
          overflow: hidden;
        }
        .error-message__name {
          padding: 20px;
          background-color: #600;
        }
        .error-message__message {
          padding: 20px;
          background-color: #900;
          flex-grow: 1;
        }
        .error-info {
          background-color: #1E1E1E;
          border-radius: 0 0 5px 5px;
          margin-bottom: 20px;
        }
        .error-details {
          white-space: pre;
          font-family: Consolas, fixed;
          font-size: 80%;
          padding: 20px;
          background-color: #111;
        }
        .stack-trace {
          font-family: Consolas, fixed;
          padding: 20px;
        }
        .stack-line {

        }
        .stack-line__match,
        .stack-line__column {
          display: none;
        }
        .stack-frame {
          background-color: #1E1E1E;
          padding: 0;
          margin-bottom: 20px;
          border-radius: 5px;
          overflow: hidden;
        }
        .source-file {
          font-weight: bold;
          font-family: Consolas, fixed;
          padding: 8px 10px;
          background-color: #000;
        }
        .source-file__filename {
          text-decoration: underline;
        }
        .source-lines {
          font-family: Consolas, fixed;
          padding: 0;
          margin: 0;
          color: #5A5A5A;
        }
        .source-lines__line {
          padding: 5px 10px;
          margin: 0;
          white-space: pre;
          list-style: decimal inside none;
        }
        .source-lines__line span {
          color: #FFF;
        }
        .source-lines__line--main {
          background-color: #111;
        }
        .no-context {
          padding: 20px;
        }
        .source-code {
          padding-left: 0 !important;
          margin: 0 !important;
          background-color: transparent !important;
        }
        .source-code code {
          display: inline-block;
        }
      </style>
    </head>
    <body>
      <div class=\\"error-info\\">
        <div class=\\"error-message\\">
          <div class=\\"error-message__name\\">DetailedError</div>
          <div class=\\"error-message__message\\">Detailed error message</div>
        </div>
        
    <ol class=\\"stack-trace\\">
      
    <li>
      <span class=\\"stack-line__source\\">express-error-renderer/src/example/index.test.ts:152</span>
      <span class=\\"stack-line__method\\">(server.get)</span>
    </li>
  
    </ol>
  
        <div class=\\"error-details\\">{
  \\"details\\": {
    \\"user\\": {
      \\"name\\": \\"Jack Daniels\\"
    }
  }
}</div>
      </div>
      
    <div class=\\"stack-frame\\">
      <div class=\\"source-file\\">
        <span class=\\"source-file__index\\">#1</span>
        <span class=\\"source-file__filename\\">express-error-renderer/src/example/index.test.ts</span>:<span class=\\"source-file__line\\">121</span>
      </div>
      
    <pre class=\\"source-code line-numbers\\" data-start=\\"101\\" data-line=\\"21\\">
      <code class=\\"language-typescript\\">  });

  it(\\"uses default XHR error formatter by default\\", async () => {
    const server = express();

    server.get(\\"/error\\", (_request, _response, _next) => {
      throw new Error(\\"Error message\\");
    });

    server.use(expressErrorRenderer());

    const app = supertest(server);
    const response = await app
      .get(\\"/error\\")
      .set(\\"X-Requested-With\\", \\"XMLHttpRequest\\")
      .send();

    expect(response.status).toEqual(HttpStatus.INTERNAL_SERVER_ERROR);
    expect(response.body.error).toEqual(\\"Error message\\");
    expect(response.body.stack).toBeInstanceOf(Array);
    expect(response.body.stack.length).toBeGreaterThan(0);
  });

  it(\\"doesn't return XHR error stack if details are disabled\\", async () => {
    const server = express();

    server.get(\\"/error\\", (_request, _response, _next) => {
      throw new Error(\\"Error message\\");
    });

    server.use(
      expressErrorRenderer({
        debug: false,
      }),
    );

    const app = supertest(server);
    const response = await app
      .get(\\"/error\\")
      .set(\\"X-Requested-With\\", \\"XMLHttpRequest\\")
      .send();</code></pre>
  
    </div>
  
    </body>
    </html>
  "
`;

exports[`create-user-route renders errors from anonymous functions 1`] = `
"
    <html>
    <head>
      <meta charset=\\"utf-8\\"/>
      <title>Error</title>

      <style>/* http://meyerweb.com/eric/tools/css/reset/
   v2.0 | 20110126
   License: none (public domain)
*/

html,
body,
div,
span,
applet,
object,
iframe,
h1,
h2,
h3,
h4,
h5,
h6,
p,
blockquote,
pre,
a,
abbr,
acronym,
address,
big,
cite,
code,
del,
dfn,
em,
img,
ins,
kbd,
q,
s,
samp,
small,
strike,
strong,
sub,
sup,
tt,
var,
b,
u,
i,
center,
dl,
dt,
dd,
ol,
ul,
li,
fieldset,
form,
label,
legend,
table,
caption,
tbody,
tfoot,
thead,
tr,
th,
td,
article,
aside,
canvas,
details,
embed,
figure,
figcaption,
footer,
header,
hgroup,
menu,
nav,
output,
ruby,
section,
summary,
time,
mark,
audio,
video {
	margin: 0;
	padding: 0;
	border: 0;
	font-size: 100%;
	font: inherit;
	vertical-align: baseline;
}
/* HTML5 display-role reset for older browsers */
article,
aside,
details,
figcaption,
figure,
footer,
header,
hgroup,
menu,
nav,
section {
	display: block;
}
body {
	line-height: 1;
}
ol,
ul {
	list-style: none;
}
blockquote,
q {
	quotes: none;
}
blockquote:before,
blockquote:after,
q:before,
q:after {
	content: '';
	content: none;
}
table {
	border-collapse: collapse;
	border-spacing: 0;
}

/* http://prismjs.com/download.html?themes=prism-okaidia&languages=clike+javascript+typescript&plugins=line-highlight+line-numbers */
/**
 * okaidia theme for JavaScript, CSS and HTML
 * Loosely based on Monokai textmate theme by http://www.monokai.nl/
 * @author ocodia
 */

code[class*='language-'],
pre[class*='language-'] {
	color: #f8f8f2;
	background: none;
	text-shadow: 0 1px rgba(0, 0, 0, 0.3);
	font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	word-wrap: normal;
	line-height: 1.5;

	-moz-tab-size: 4;
	-o-tab-size: 4;
	tab-size: 4;

	-webkit-hyphens: none;
	-moz-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
}

/* Code blocks */
pre[class*='language-'] {
	padding: 1em;
	margin: 0.5em 0;
	overflow: auto;
	border-radius: 0.3em;
}

:not(pre) > code[class*='language-'],
pre[class*='language-'] {
	background: #272822;
}

/* Inline code */
:not(pre) > code[class*='language-'] {
	padding: 0.1em;
	border-radius: 0.3em;
	white-space: normal;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
	color: slategray;
}

.token.punctuation {
	color: #f8f8f2;
}

.namespace {
	opacity: 0.7;
}

.token.property,
.token.tag,
.token.constant,
.token.symbol,
.token.deleted {
	color: #f92672;
}

.token.boolean,
.token.number {
	color: #ae81ff;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
	color: #a6e22e;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string,
.token.variable {
	color: #f8f8f2;
}

.token.atrule,
.token.attr-value,
.token.function {
	color: #e6db74;
}

.token.keyword {
	color: #66d9ef;
}

.token.regex,
.token.important {
	color: #fd971f;
}

.token.important,
.token.bold {
	font-weight: bold;
}
.token.italic {
	font-style: italic;
}

.token.entity {
	cursor: help;
}

pre[data-line] {
	position: relative;
	padding: 1em 0 1em 3em;
}

.line-highlight {
	position: absolute;
	left: 0;
	right: 0;
	padding: inherit 0;
	margin-top: 1em; /* Same as .prismâ€™s padding-top */

	background: hsla(24, 20%, 50%, 0.08);
	background: linear-gradient(to right, hsla(24, 20%, 50%, 0.1) 70%, hsla(24, 20%, 50%, 0));

	pointer-events: none;

	line-height: inherit;
	white-space: pre;
}

.line-highlight:before,
.line-highlight[data-end]:after {
	content: attr(data-start);
	position: absolute;
	top: 0.4em;
	left: 0.6em;
	min-width: 1em;
	padding: 0 0.5em;
	background-color: hsla(24, 20%, 50%, 0.4);
	color: hsl(24, 20%, 95%);
	font: bold 65%/1.5 sans-serif;
	text-align: center;
	vertical-align: 0.3em;
	border-radius: 999px;
	text-shadow: none;
	box-shadow: 0 1px white;
}

.line-highlight[data-end]:after {
	content: attr(data-end);
	top: auto;
	bottom: 0.4em;
}

pre.line-numbers {
	position: relative;
	padding-left: 3.8em;
	counter-reset: linenumber;
}

pre.line-numbers > code {
	position: relative;
	white-space: inherit;
}

.line-numbers .line-numbers-rows {
	position: absolute;
	pointer-events: none;
	top: 0;
	font-size: 100%;
	left: -3.8em;
	width: 3em; /* works for line-numbers below 1000 lines */
	letter-spacing: -1px;
	border-right: 1px solid #999;

	-webkit-user-select: none;
	-moz-user-select: none;
	-ms-user-select: none;
	user-select: none;
}

.line-numbers-rows > span {
	pointer-events: none;
	display: block;
	counter-increment: linenumber;
}

.line-numbers-rows > span:before {
	content: counter(linenumber);
	color: #999;
	display: block;
	padding-right: 0.8em;
	text-align: right;
}
</style>
      <script>/* http://prismjs.com/download.html?themes=prism-okaidia&languages=clike+javascript+typescript&plugins=line-highlight+line-numbers */
var _self=\\"undefined\\"!=typeof window?window:\\"undefined\\"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},Prism=function(){var e=/\\\\blang(?:uage)?-(\\\\w+)\\\\b/i,t=0,n=_self.Prism={manual:_self.Prism&&_self.Prism.manual,util:{encode:function(e){return e instanceof a?new a(e.type,n.util.encode(e.content),e.alias):\\"Array\\"===n.util.type(e)?e.map(n.util.encode):e.replace(/&/g,\\"&amp;\\").replace(/</g,\\"&lt;\\").replace(/\\\\u00a0/g,\\" \\")},type:function(e){return Object.prototype.toString.call(e).match(/\\\\[object (\\\\w+)\\\\]/)[1]},objId:function(e){return e.__id||Object.defineProperty(e,\\"__id\\",{value:++t}),e.__id},clone:function(e){var t=n.util.type(e);switch(t){case\\"Object\\":var a={};for(var r in e)e.hasOwnProperty(r)&&(a[r]=n.util.clone(e[r]));return a;case\\"Array\\":return e.map(function(e){return n.util.clone(e)})}return e}},languages:{extend:function(e,t){var a=n.util.clone(n.languages[e]);for(var r in t)a[r]=t[r];return a},insertBefore:function(e,t,a,r){r=r||n.languages;var i=r[e];if(2==arguments.length){a=arguments[1];for(var l in a)a.hasOwnProperty(l)&&(i[l]=a[l]);return i}var o={};for(var s in i)if(i.hasOwnProperty(s)){if(s==t)for(var l in a)a.hasOwnProperty(l)&&(o[l]=a[l]);o[s]=i[s]}return n.languages.DFS(n.languages,function(t,n){n===r[e]&&t!=e&&(this[t]=o)}),r[e]=o},DFS:function(e,t,a,r){r=r||{};for(var i in e)e.hasOwnProperty(i)&&(t.call(e,i,e[i],a||i),\\"Object\\"!==n.util.type(e[i])||r[n.util.objId(e[i])]?\\"Array\\"!==n.util.type(e[i])||r[n.util.objId(e[i])]||(r[n.util.objId(e[i])]=!0,n.languages.DFS(e[i],t,i,r)):(r[n.util.objId(e[i])]=!0,n.languages.DFS(e[i],t,null,r)))}},plugins:{},highlightAll:function(e,t){var a={callback:t,selector:'code[class*=\\"language-\\"], [class*=\\"language-\\"] code, code[class*=\\"lang-\\"], [class*=\\"lang-\\"] code'};n.hooks.run(\\"before-highlightall\\",a);for(var r,i=a.elements||document.querySelectorAll(a.selector),l=0;r=i[l++];)n.highlightElement(r,e===!0,a.callback)},highlightElement:function(t,a,r){for(var i,l,o=t;o&&!e.test(o.className);)o=o.parentNode;o&&(i=(o.className.match(e)||[,\\"\\"])[1].toLowerCase(),l=n.languages[i]),t.className=t.className.replace(e,\\"\\").replace(/\\\\s+/g,\\" \\")+\\" language-\\"+i,o=t.parentNode,/pre/i.test(o.nodeName)&&(o.className=o.className.replace(e,\\"\\").replace(/\\\\s+/g,\\" \\")+\\" language-\\"+i);var s=t.textContent,u={element:t,language:i,grammar:l,code:s};if(n.hooks.run(\\"before-sanity-check\\",u),!u.code||!u.grammar)return u.code&&(n.hooks.run(\\"before-highlight\\",u),u.element.textContent=u.code,n.hooks.run(\\"after-highlight\\",u)),n.hooks.run(\\"complete\\",u),void 0;if(n.hooks.run(\\"before-highlight\\",u),a&&_self.Worker){var g=new Worker(n.filename);g.onmessage=function(e){u.highlightedCode=e.data,n.hooks.run(\\"before-insert\\",u),u.element.innerHTML=u.highlightedCode,r&&r.call(u.element),n.hooks.run(\\"after-highlight\\",u),n.hooks.run(\\"complete\\",u)},g.postMessage(JSON.stringify({language:u.language,code:u.code,immediateClose:!0}))}else u.highlightedCode=n.highlight(u.code,u.grammar,u.language),n.hooks.run(\\"before-insert\\",u),u.element.innerHTML=u.highlightedCode,r&&r.call(t),n.hooks.run(\\"after-highlight\\",u),n.hooks.run(\\"complete\\",u)},highlight:function(e,t,r){var i=n.tokenize(e,t);return a.stringify(n.util.encode(i),r)},matchGrammar:function(e,t,a,r,i,l,o){var s=n.Token;for(var u in a)if(a.hasOwnProperty(u)&&a[u]){if(u==o)return;var g=a[u];g=\\"Array\\"===n.util.type(g)?g:[g];for(var c=0;c<g.length;++c){var h=g[c],f=h.inside,d=!!h.lookbehind,m=!!h.greedy,p=0,y=h.alias;if(m&&!h.pattern.global){var v=h.pattern.toString().match(/[imuy]*$/)[0];h.pattern=RegExp(h.pattern.source,v+\\"g\\")}h=h.pattern||h;for(var b=r,k=i;b<t.length;k+=t[b].length,++b){var w=t[b];if(t.length>e.length)return;if(!(w instanceof s)){h.lastIndex=0;var _=h.exec(w),P=1;if(!_&&m&&b!=t.length-1){if(h.lastIndex=k,_=h.exec(e),!_)break;for(var A=_.index+(d?_[1].length:0),j=_.index+_[0].length,x=b,O=k,S=t.length;S>x&&(j>O||!t[x].type&&!t[x-1].greedy);++x)O+=t[x].length,A>=O&&(++b,k=O);if(t[b]instanceof s||t[x-1].greedy)continue;P=x-b,w=e.slice(k,O),_.index-=k}if(_){d&&(p=_[1].length);var A=_.index+p,_=_[0].slice(p),j=A+_.length,N=w.slice(0,A),C=w.slice(j),E=[b,P];N&&(++b,k+=N.length,E.push(N));var I=new s(u,f?n.tokenize(_,f):_,y,_,m);if(E.push(I),C&&E.push(C),Array.prototype.splice.apply(t,E),1!=P&&n.matchGrammar(e,t,a,b,k,!0,u),l)break}else if(l)break}}}}},tokenize:function(e,t){var a=[e],r=t.rest;if(r){for(var i in r)t[i]=r[i];delete t.rest}return n.matchGrammar(e,a,t,0,0,!1),a},hooks:{all:{},add:function(e,t){var a=n.hooks.all;a[e]=a[e]||[],a[e].push(t)},run:function(e,t){var a=n.hooks.all[e];if(a&&a.length)for(var r,i=0;r=a[i++];)r(t)}}},a=n.Token=function(e,t,n,a,r){this.type=e,this.content=t,this.alias=n,this.length=0|(a||\\"\\").length,this.greedy=!!r};if(a.stringify=function(e,t,r){if(\\"string\\"==typeof e)return e;if(\\"Array\\"===n.util.type(e))return e.map(function(n){return a.stringify(n,t,e)}).join(\\"\\");var i={type:e.type,content:a.stringify(e.content,t,r),tag:\\"span\\",classes:[\\"token\\",e.type],attributes:{},language:t,parent:r};if(\\"comment\\"==i.type&&(i.attributes.spellcheck=\\"true\\"),e.alias){var l=\\"Array\\"===n.util.type(e.alias)?e.alias:[e.alias];Array.prototype.push.apply(i.classes,l)}n.hooks.run(\\"wrap\\",i);var o=Object.keys(i.attributes).map(function(e){return e+'=\\"'+(i.attributes[e]||\\"\\").replace(/\\"/g,\\"&quot;\\")+'\\"'}).join(\\" \\");return\\"<\\"+i.tag+' class=\\"'+i.classes.join(\\" \\")+'\\"'+(o?\\" \\"+o:\\"\\")+\\">\\"+i.content+\\"</\\"+i.tag+\\">\\"},!_self.document)return _self.addEventListener?(_self.addEventListener(\\"message\\",function(e){var t=JSON.parse(e.data),a=t.language,r=t.code,i=t.immediateClose;_self.postMessage(n.highlight(r,n.languages[a],a)),i&&_self.close()},!1),_self.Prism):_self.Prism;var r=document.currentScript||[].slice.call(document.getElementsByTagName(\\"script\\")).pop();return r&&(n.filename=r.src,n.manual||r.hasAttribute(\\"data-manual\\")||(\\"loading\\"!==document.readyState?window.requestAnimationFrame?window.requestAnimationFrame(n.highlightAll):window.setTimeout(n.highlightAll,16):document.addEventListener(\\"DOMContentLoaded\\",n.highlightAll))),_self.Prism}();\\"undefined\\"!=typeof module&&module.exports&&(module.exports=Prism),\\"undefined\\"!=typeof global&&(global.Prism=Prism);
Prism.languages.clike={comment:[{pattern:/(^|[^\\\\\\\\])\\\\/\\\\*[\\\\s\\\\S]*?(?:\\\\*\\\\/|$)/,lookbehind:!0},{pattern:/(^|[^\\\\\\\\:])\\\\/\\\\/.*/,lookbehind:!0}],string:{pattern:/([\\"'])(\\\\\\\\(?:\\\\r\\\\n|[\\\\s\\\\S])|(?!\\\\1)[^\\\\\\\\\\\\r\\\\n])*\\\\1/,greedy:!0},\\"class-name\\":{pattern:/((?:\\\\b(?:class|interface|extends|implements|trait|instanceof|new)\\\\s+)|(?:catch\\\\s+\\\\())[a-z0-9_\\\\.\\\\\\\\]+/i,lookbehind:!0,inside:{punctuation:/(\\\\.|\\\\\\\\)/}},keyword:/\\\\b(if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\\\\b/,\\"boolean\\":/\\\\b(true|false)\\\\b/,\\"function\\":/[a-z0-9_]+(?=\\\\()/i,number:/\\\\b-?(?:0x[\\\\da-f]+|\\\\d*\\\\.?\\\\d+(?:e[+-]?\\\\d+)?)\\\\b/i,operator:/--?|\\\\+\\\\+?|!=?=?|<=?|>=?|==?=?|&&?|\\\\|\\\\|?|\\\\?|\\\\*|\\\\/|~|\\\\^|%/,punctuation:/[{}[\\\\];(),.:]/};
Prism.languages.javascript=Prism.languages.extend(\\"clike\\",{keyword:/\\\\b(as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|var|void|while|with|yield)\\\\b/,number:/\\\\b-?(0[xX][\\\\dA-Fa-f]+|0[bB][01]+|0[oO][0-7]+|\\\\d*\\\\.?\\\\d+([Ee][+-]?\\\\d+)?|NaN|Infinity)\\\\b/,\\"function\\":/[_$a-zA-Z\\\\xA0-\\\\uFFFF][_$a-zA-Z0-9\\\\xA0-\\\\uFFFF]*(?=\\\\()/i,operator:/-[-=]?|\\\\+[+=]?|!=?=?|<<?=?|>>?>?=?|=(?:==?|>)?|&[&=]?|\\\\|[|=]?|\\\\*\\\\*?=?|\\\\/=?|~|\\\\^=?|%=?|\\\\?|\\\\.{3}/}),Prism.languages.insertBefore(\\"javascript\\",\\"keyword\\",{regex:{pattern:/(^|[^\\\\/])\\\\/(?!\\\\/)(\\\\[[^\\\\]\\\\r\\\\n]+]|\\\\\\\\.|[^\\\\/\\\\\\\\\\\\[\\\\r\\\\n])+\\\\/[gimyu]{0,5}(?=\\\\s*($|[\\\\r\\\\n,.;})]))/,lookbehind:!0,greedy:!0}}),Prism.languages.insertBefore(\\"javascript\\",\\"string\\",{\\"template-string\\":{pattern:/\`(?:\\\\\\\\\\\\\\\\|\\\\\\\\?[^\\\\\\\\])*?\`/,greedy:!0,inside:{interpolation:{pattern:/\\\\$\\\\{[^}]+\\\\}/,inside:{\\"interpolation-punctuation\\":{pattern:/^\\\\$\\\\{|\\\\}$/,alias:\\"punctuation\\"},rest:Prism.languages.javascript}},string:/[\\\\s\\\\S]+/}}}),Prism.languages.markup&&Prism.languages.insertBefore(\\"markup\\",\\"tag\\",{script:{pattern:/(<script[\\\\s\\\\S]*?>)[\\\\s\\\\S]*?(?=<\\\\/script>)/i,lookbehind:!0,inside:Prism.languages.javascript,alias:\\"language-javascript\\"}}),Prism.languages.js=Prism.languages.javascript;
Prism.languages.typescript=Prism.languages.extend(\\"javascript\\",{keyword:/\\\\b(as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|var|void|while|with|yield|false|true|module|declare|constructor|string|Function|any|number|boolean|Array|enum|symbol|namespace|abstract|require|type)\\\\b/}),Prism.languages.ts=Prism.languages.typescript;
!function(){function e(e,t){return Array.prototype.slice.call((t||document).querySelectorAll(e))}function t(e,t){return t=\\" \\"+t+\\" \\",(\\" \\"+e.className+\\" \\").replace(/[\\\\n\\\\t]/g,\\" \\").indexOf(t)>-1}function n(e,n,i){for(var o,a=n.replace(/\\\\s+/g,\\"\\").split(\\",\\"),l=+e.getAttribute(\\"data-line-offset\\")||0,d=r()?parseInt:parseFloat,c=d(getComputedStyle(e).lineHeight),s=0;o=a[s++];){o=o.split(\\"-\\");var u=+o[0],m=+o[1]||u,h=document.createElement(\\"div\\");h.textContent=Array(m-u+2).join(\\" \\\\n\\"),h.setAttribute(\\"aria-hidden\\",\\"true\\"),h.className=(i||\\"\\")+\\" line-highlight\\",t(e,\\"line-numbers\\")||(h.setAttribute(\\"data-start\\",u),m>u&&h.setAttribute(\\"data-end\\",m)),h.style.top=(u-l-1)*c+\\"px\\",t(e,\\"line-numbers\\")?e.appendChild(h):(e.querySelector(\\"code\\")||e).appendChild(h)}}function i(){var t=location.hash.slice(1);e(\\".temporary.line-highlight\\").forEach(function(e){e.parentNode.removeChild(e)});var i=(t.match(/\\\\.([\\\\d,-]+)$/)||[,\\"\\"])[1];if(i&&!document.getElementById(t)){var r=t.slice(0,t.lastIndexOf(\\".\\")),o=document.getElementById(r);o&&(o.hasAttribute(\\"data-line\\")||o.setAttribute(\\"data-line\\",\\"\\"),n(o,i,\\"temporary \\"),document.querySelector(\\".temporary.line-highlight\\").scrollIntoView())}}if(\\"undefined\\"!=typeof self&&self.Prism&&self.document&&document.querySelector){var r=function(){var e;return function(){if(\\"undefined\\"==typeof e){var t=document.createElement(\\"div\\");t.style.fontSize=\\"13px\\",t.style.lineHeight=\\"1.5\\",t.style.padding=0,t.style.border=0,t.innerHTML=\\"&nbsp;<br />&nbsp;\\",document.body.appendChild(t),e=38===t.offsetHeight,document.body.removeChild(t)}return e}}(),o=0;Prism.hooks.add(\\"before-sanity-check\\",function(t){var n=t.element.parentNode,i=n&&n.getAttribute(\\"data-line\\");if(n&&i&&/pre/i.test(n.nodeName)){var r=0;e(\\".line-highlight\\",n).forEach(function(e){r+=e.textContent.length,e.parentNode.removeChild(e)}),r&&/^( \\\\n)+$/.test(t.code.slice(-r))&&(t.code=t.code.slice(0,-r))}}),Prism.hooks.add(\\"complete\\",function(e){var t=e.element.parentNode,r=t&&t.getAttribute(\\"data-line\\");t&&r&&/pre/i.test(t.nodeName)&&(clearTimeout(o),n(t,r),o=setTimeout(i,1))}),window.addEventListener(\\"hashchange\\",i)}}();
!function(){if(\\"undefined\\"!=typeof self&&self.Prism&&self.document){var e=\\"line-numbers\\",t=function(e){var t=n(e),r=t[\\"white-space\\"];if(\\"pre-wrap\\"===r||\\"pre-line\\"===r){var s=e.querySelector(\\"code\\"),l=e.querySelector(\\".line-numbers-rows\\"),a=e.querySelector(\\".line-numbers-sizer\\"),i=e.textContent.split(\\"\\\\n\\");a||(a=document.createElement(\\"span\\"),a.className=\\"line-numbers-sizer\\",s.appendChild(a)),a.style.display=\\"block\\",i.forEach(function(e,t){a.textContent=e||\\"\\\\n\\";var n=a.getBoundingClientRect().height;l.children[t].style.height=n+\\"px\\"}),a.textContent=\\"\\",a.style.display=\\"none\\"}},n=function(e){return e?window.getComputedStyle?getComputedStyle(e):e.currentStyle||null:null};window.addEventListener(\\"resize\\",function(){Array.prototype.forEach.call(document.querySelectorAll(\\"pre.\\"+e),t)}),Prism.hooks.add(\\"complete\\",function(e){if(e.code){var n=e.element.parentNode,r=/\\\\s*\\\\bline-numbers\\\\b\\\\s*/;if(n&&/pre/i.test(n.nodeName)&&(r.test(n.className)||r.test(e.element.className))&&!e.element.querySelector(\\".line-numbers-rows\\")){r.test(e.element.className)&&(e.element.className=e.element.className.replace(r,\\" \\")),r.test(n.className)||(n.className+=\\" line-numbers\\");var s,l=e.code.match(/\\\\n(?!$)/g),a=l?l.length+1:1,i=new Array(a+1);i=i.join(\\"<span></span>\\"),s=document.createElement(\\"span\\"),s.setAttribute(\\"aria-hidden\\",\\"true\\"),s.className=\\"line-numbers-rows\\",s.innerHTML=i,n.hasAttribute(\\"data-start\\")&&(n.style.counterReset=\\"linenumber \\"+(parseInt(n.getAttribute(\\"data-start\\"),10)-1)),e.element.appendChild(s),t(n)}}})}}();
</script>

      <style>
        body {
          background-color: #252526;
          color: #FFF;
          margin: 0;
          padding: 20px;
        }
        .error-message {
          font-family: Consolas, fixed;
          font-size: 120%;
          margin-bottom: 20px;
          border-radius: 5px 5px 0 0;
          display: flex;
          overflow: hidden;
        }
        .error-message__name {
          padding: 20px;
          background-color: #600;
        }
        .error-message__message {
          padding: 20px;
          background-color: #900;
          flex-grow: 1;
        }
        .error-info {
          background-color: #1E1E1E;
          border-radius: 0 0 5px 5px;
          margin-bottom: 20px;
        }
        .error-details {
          white-space: pre;
          font-family: Consolas, fixed;
          font-size: 80%;
          padding: 20px;
          background-color: #111;
        }
        .stack-trace {
          font-family: Consolas, fixed;
          padding: 20px;
        }
        .stack-line {

        }
        .stack-line__match,
        .stack-line__column {
          display: none;
        }
        .stack-frame {
          background-color: #1E1E1E;
          padding: 0;
          margin-bottom: 20px;
          border-radius: 5px;
          overflow: hidden;
        }
        .source-file {
          font-weight: bold;
          font-family: Consolas, fixed;
          padding: 8px 10px;
          background-color: #000;
        }
        .source-file__filename {
          text-decoration: underline;
        }
        .source-lines {
          font-family: Consolas, fixed;
          padding: 0;
          margin: 0;
          color: #5A5A5A;
        }
        .source-lines__line {
          padding: 5px 10px;
          margin: 0;
          white-space: pre;
          list-style: decimal inside none;
        }
        .source-lines__line span {
          color: #FFF;
        }
        .source-lines__line--main {
          background-color: #111;
        }
        .no-context {
          padding: 20px;
        }
        .source-code {
          padding-left: 0 !important;
          margin: 0 !important;
          background-color: transparent !important;
        }
        .source-code code {
          display: inline-block;
        }
      </style>
    </head>
    <body>
      <div class=\\"error-info\\">
        <div class=\\"error-message\\">
          <div class=\\"error-message__name\\">Error</div>
          <div class=\\"error-message__message\\">Error message</div>
        </div>
        
    <ol class=\\"stack-trace\\">
      
    <li>
      <span class=\\"stack-line__source\\">express-error-renderer/src/example/index.test.ts:232</span>
      
    </li>
  

    <li>
      <span class=\\"stack-line__source\\">express-error-renderer/src/example/index.test.ts:233</span>
      <span class=\\"stack-line__method\\">(server.get)</span>
    </li>
  
    </ol>
  
        
      </div>
      
    <div class=\\"stack-frame\\">
      <div class=\\"source-file\\">
        <span class=\\"source-file__index\\">#1</span>
        <span class=\\"source-file__filename\\">express-error-renderer/src/example/index.test.ts</span>:<span class=\\"source-file__line\\">177</span>
      </div>
      
    <pre class=\\"source-code line-numbers\\" data-start=\\"157\\" data-line=\\"21\\">
      <code class=\\"language-typescript\\">    });

    server.use(expressErrorRenderer());

    const app = supertest(server);
    const response = await app.get(\\"/error\\");

    expect(response.status).toEqual(HttpStatus.INTERNAL_SERVER_ERROR);
    expect(response.text).toContain(\\"Jack Daniels\\");
    expect(response.text).toMatchSnapshot();
  });

  it(\\"can be configured to show message\\", async () => {
    const server = express();

    server.get(\\"/error\\", (_request, _response, _next) => {
      throw new Error(\\"Test error\\");
    });

    server.use(
      expressErrorRenderer({
        debug: false,
        showMessage: true,
      }),
    );

    const app = supertest(server);
    const response = await app.get(\\"/error\\");

    expect(response.status).toEqual(HttpStatus.INTERNAL_SERVER_ERROR);
    expect(response.text).toMatchSnapshot();
  });

  it(\\"can be configured not to show message\\", async () => {
    const server = express();

    server.get(\\"/error\\", (_request, _response, _next) => {
      throw new Error(\\"Test error\\");
    });

    server.use(</code></pre>
  
    </div>
  

    <div class=\\"stack-frame\\">
      <div class=\\"source-file\\">
        <span class=\\"source-file__index\\">#2</span>
        <span class=\\"source-file__filename\\">express-error-renderer/src/example/index.test.ts</span>:<span class=\\"source-file__line\\">178</span>
      </div>
      
    <pre class=\\"source-code line-numbers\\" data-start=\\"158\\" data-line=\\"21\\">
      <code class=\\"language-typescript\\">
    server.use(expressErrorRenderer());

    const app = supertest(server);
    const response = await app.get(\\"/error\\");

    expect(response.status).toEqual(HttpStatus.INTERNAL_SERVER_ERROR);
    expect(response.text).toContain(\\"Jack Daniels\\");
    expect(response.text).toMatchSnapshot();
  });

  it(\\"can be configured to show message\\", async () => {
    const server = express();

    server.get(\\"/error\\", (_request, _response, _next) => {
      throw new Error(\\"Test error\\");
    });

    server.use(
      expressErrorRenderer({
        debug: false,
        showMessage: true,
      }),
    );

    const app = supertest(server);
    const response = await app.get(\\"/error\\");

    expect(response.status).toEqual(HttpStatus.INTERNAL_SERVER_ERROR);
    expect(response.text).toMatchSnapshot();
  });

  it(\\"can be configured not to show message\\", async () => {
    const server = express();

    server.get(\\"/error\\", (_request, _response, _next) => {
      throw new Error(\\"Test error\\");
    });

    server.use(
      expressErrorRenderer({</code></pre>
  
    </div>
  
    </body>
    </html>
  "
`;

exports[`create-user-route renders errors without trace 1`] = `"Error message"`;

exports[`create-user-route renders errors without trace hiding message 1`] = `"Internal error occurred"`;

exports[`create-user-route should handle cyclic errors 1`] = `
"
    <html>
    <head>
      <meta charset=\\"utf-8\\"/>
      <title>Error</title>

      <style>/* http://meyerweb.com/eric/tools/css/reset/
   v2.0 | 20110126
   License: none (public domain)
*/

html,
body,
div,
span,
applet,
object,
iframe,
h1,
h2,
h3,
h4,
h5,
h6,
p,
blockquote,
pre,
a,
abbr,
acronym,
address,
big,
cite,
code,
del,
dfn,
em,
img,
ins,
kbd,
q,
s,
samp,
small,
strike,
strong,
sub,
sup,
tt,
var,
b,
u,
i,
center,
dl,
dt,
dd,
ol,
ul,
li,
fieldset,
form,
label,
legend,
table,
caption,
tbody,
tfoot,
thead,
tr,
th,
td,
article,
aside,
canvas,
details,
embed,
figure,
figcaption,
footer,
header,
hgroup,
menu,
nav,
output,
ruby,
section,
summary,
time,
mark,
audio,
video {
	margin: 0;
	padding: 0;
	border: 0;
	font-size: 100%;
	font: inherit;
	vertical-align: baseline;
}
/* HTML5 display-role reset for older browsers */
article,
aside,
details,
figcaption,
figure,
footer,
header,
hgroup,
menu,
nav,
section {
	display: block;
}
body {
	line-height: 1;
}
ol,
ul {
	list-style: none;
}
blockquote,
q {
	quotes: none;
}
blockquote:before,
blockquote:after,
q:before,
q:after {
	content: '';
	content: none;
}
table {
	border-collapse: collapse;
	border-spacing: 0;
}

/* http://prismjs.com/download.html?themes=prism-okaidia&languages=clike+javascript+typescript&plugins=line-highlight+line-numbers */
/**
 * okaidia theme for JavaScript, CSS and HTML
 * Loosely based on Monokai textmate theme by http://www.monokai.nl/
 * @author ocodia
 */

code[class*='language-'],
pre[class*='language-'] {
	color: #f8f8f2;
	background: none;
	text-shadow: 0 1px rgba(0, 0, 0, 0.3);
	font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	word-wrap: normal;
	line-height: 1.5;

	-moz-tab-size: 4;
	-o-tab-size: 4;
	tab-size: 4;

	-webkit-hyphens: none;
	-moz-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
}

/* Code blocks */
pre[class*='language-'] {
	padding: 1em;
	margin: 0.5em 0;
	overflow: auto;
	border-radius: 0.3em;
}

:not(pre) > code[class*='language-'],
pre[class*='language-'] {
	background: #272822;
}

/* Inline code */
:not(pre) > code[class*='language-'] {
	padding: 0.1em;
	border-radius: 0.3em;
	white-space: normal;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
	color: slategray;
}

.token.punctuation {
	color: #f8f8f2;
}

.namespace {
	opacity: 0.7;
}

.token.property,
.token.tag,
.token.constant,
.token.symbol,
.token.deleted {
	color: #f92672;
}

.token.boolean,
.token.number {
	color: #ae81ff;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
	color: #a6e22e;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string,
.token.variable {
	color: #f8f8f2;
}

.token.atrule,
.token.attr-value,
.token.function {
	color: #e6db74;
}

.token.keyword {
	color: #66d9ef;
}

.token.regex,
.token.important {
	color: #fd971f;
}

.token.important,
.token.bold {
	font-weight: bold;
}
.token.italic {
	font-style: italic;
}

.token.entity {
	cursor: help;
}

pre[data-line] {
	position: relative;
	padding: 1em 0 1em 3em;
}

.line-highlight {
	position: absolute;
	left: 0;
	right: 0;
	padding: inherit 0;
	margin-top: 1em; /* Same as .prismâ€™s padding-top */

	background: hsla(24, 20%, 50%, 0.08);
	background: linear-gradient(to right, hsla(24, 20%, 50%, 0.1) 70%, hsla(24, 20%, 50%, 0));

	pointer-events: none;

	line-height: inherit;
	white-space: pre;
}

.line-highlight:before,
.line-highlight[data-end]:after {
	content: attr(data-start);
	position: absolute;
	top: 0.4em;
	left: 0.6em;
	min-width: 1em;
	padding: 0 0.5em;
	background-color: hsla(24, 20%, 50%, 0.4);
	color: hsl(24, 20%, 95%);
	font: bold 65%/1.5 sans-serif;
	text-align: center;
	vertical-align: 0.3em;
	border-radius: 999px;
	text-shadow: none;
	box-shadow: 0 1px white;
}

.line-highlight[data-end]:after {
	content: attr(data-end);
	top: auto;
	bottom: 0.4em;
}

pre.line-numbers {
	position: relative;
	padding-left: 3.8em;
	counter-reset: linenumber;
}

pre.line-numbers > code {
	position: relative;
	white-space: inherit;
}

.line-numbers .line-numbers-rows {
	position: absolute;
	pointer-events: none;
	top: 0;
	font-size: 100%;
	left: -3.8em;
	width: 3em; /* works for line-numbers below 1000 lines */
	letter-spacing: -1px;
	border-right: 1px solid #999;

	-webkit-user-select: none;
	-moz-user-select: none;
	-ms-user-select: none;
	user-select: none;
}

.line-numbers-rows > span {
	pointer-events: none;
	display: block;
	counter-increment: linenumber;
}

.line-numbers-rows > span:before {
	content: counter(linenumber);
	color: #999;
	display: block;
	padding-right: 0.8em;
	text-align: right;
}
</style>
      <script>/* http://prismjs.com/download.html?themes=prism-okaidia&languages=clike+javascript+typescript&plugins=line-highlight+line-numbers */
var _self=\\"undefined\\"!=typeof window?window:\\"undefined\\"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},Prism=function(){var e=/\\\\blang(?:uage)?-(\\\\w+)\\\\b/i,t=0,n=_self.Prism={manual:_self.Prism&&_self.Prism.manual,util:{encode:function(e){return e instanceof a?new a(e.type,n.util.encode(e.content),e.alias):\\"Array\\"===n.util.type(e)?e.map(n.util.encode):e.replace(/&/g,\\"&amp;\\").replace(/</g,\\"&lt;\\").replace(/\\\\u00a0/g,\\" \\")},type:function(e){return Object.prototype.toString.call(e).match(/\\\\[object (\\\\w+)\\\\]/)[1]},objId:function(e){return e.__id||Object.defineProperty(e,\\"__id\\",{value:++t}),e.__id},clone:function(e){var t=n.util.type(e);switch(t){case\\"Object\\":var a={};for(var r in e)e.hasOwnProperty(r)&&(a[r]=n.util.clone(e[r]));return a;case\\"Array\\":return e.map(function(e){return n.util.clone(e)})}return e}},languages:{extend:function(e,t){var a=n.util.clone(n.languages[e]);for(var r in t)a[r]=t[r];return a},insertBefore:function(e,t,a,r){r=r||n.languages;var i=r[e];if(2==arguments.length){a=arguments[1];for(var l in a)a.hasOwnProperty(l)&&(i[l]=a[l]);return i}var o={};for(var s in i)if(i.hasOwnProperty(s)){if(s==t)for(var l in a)a.hasOwnProperty(l)&&(o[l]=a[l]);o[s]=i[s]}return n.languages.DFS(n.languages,function(t,n){n===r[e]&&t!=e&&(this[t]=o)}),r[e]=o},DFS:function(e,t,a,r){r=r||{};for(var i in e)e.hasOwnProperty(i)&&(t.call(e,i,e[i],a||i),\\"Object\\"!==n.util.type(e[i])||r[n.util.objId(e[i])]?\\"Array\\"!==n.util.type(e[i])||r[n.util.objId(e[i])]||(r[n.util.objId(e[i])]=!0,n.languages.DFS(e[i],t,i,r)):(r[n.util.objId(e[i])]=!0,n.languages.DFS(e[i],t,null,r)))}},plugins:{},highlightAll:function(e,t){var a={callback:t,selector:'code[class*=\\"language-\\"], [class*=\\"language-\\"] code, code[class*=\\"lang-\\"], [class*=\\"lang-\\"] code'};n.hooks.run(\\"before-highlightall\\",a);for(var r,i=a.elements||document.querySelectorAll(a.selector),l=0;r=i[l++];)n.highlightElement(r,e===!0,a.callback)},highlightElement:function(t,a,r){for(var i,l,o=t;o&&!e.test(o.className);)o=o.parentNode;o&&(i=(o.className.match(e)||[,\\"\\"])[1].toLowerCase(),l=n.languages[i]),t.className=t.className.replace(e,\\"\\").replace(/\\\\s+/g,\\" \\")+\\" language-\\"+i,o=t.parentNode,/pre/i.test(o.nodeName)&&(o.className=o.className.replace(e,\\"\\").replace(/\\\\s+/g,\\" \\")+\\" language-\\"+i);var s=t.textContent,u={element:t,language:i,grammar:l,code:s};if(n.hooks.run(\\"before-sanity-check\\",u),!u.code||!u.grammar)return u.code&&(n.hooks.run(\\"before-highlight\\",u),u.element.textContent=u.code,n.hooks.run(\\"after-highlight\\",u)),n.hooks.run(\\"complete\\",u),void 0;if(n.hooks.run(\\"before-highlight\\",u),a&&_self.Worker){var g=new Worker(n.filename);g.onmessage=function(e){u.highlightedCode=e.data,n.hooks.run(\\"before-insert\\",u),u.element.innerHTML=u.highlightedCode,r&&r.call(u.element),n.hooks.run(\\"after-highlight\\",u),n.hooks.run(\\"complete\\",u)},g.postMessage(JSON.stringify({language:u.language,code:u.code,immediateClose:!0}))}else u.highlightedCode=n.highlight(u.code,u.grammar,u.language),n.hooks.run(\\"before-insert\\",u),u.element.innerHTML=u.highlightedCode,r&&r.call(t),n.hooks.run(\\"after-highlight\\",u),n.hooks.run(\\"complete\\",u)},highlight:function(e,t,r){var i=n.tokenize(e,t);return a.stringify(n.util.encode(i),r)},matchGrammar:function(e,t,a,r,i,l,o){var s=n.Token;for(var u in a)if(a.hasOwnProperty(u)&&a[u]){if(u==o)return;var g=a[u];g=\\"Array\\"===n.util.type(g)?g:[g];for(var c=0;c<g.length;++c){var h=g[c],f=h.inside,d=!!h.lookbehind,m=!!h.greedy,p=0,y=h.alias;if(m&&!h.pattern.global){var v=h.pattern.toString().match(/[imuy]*$/)[0];h.pattern=RegExp(h.pattern.source,v+\\"g\\")}h=h.pattern||h;for(var b=r,k=i;b<t.length;k+=t[b].length,++b){var w=t[b];if(t.length>e.length)return;if(!(w instanceof s)){h.lastIndex=0;var _=h.exec(w),P=1;if(!_&&m&&b!=t.length-1){if(h.lastIndex=k,_=h.exec(e),!_)break;for(var A=_.index+(d?_[1].length:0),j=_.index+_[0].length,x=b,O=k,S=t.length;S>x&&(j>O||!t[x].type&&!t[x-1].greedy);++x)O+=t[x].length,A>=O&&(++b,k=O);if(t[b]instanceof s||t[x-1].greedy)continue;P=x-b,w=e.slice(k,O),_.index-=k}if(_){d&&(p=_[1].length);var A=_.index+p,_=_[0].slice(p),j=A+_.length,N=w.slice(0,A),C=w.slice(j),E=[b,P];N&&(++b,k+=N.length,E.push(N));var I=new s(u,f?n.tokenize(_,f):_,y,_,m);if(E.push(I),C&&E.push(C),Array.prototype.splice.apply(t,E),1!=P&&n.matchGrammar(e,t,a,b,k,!0,u),l)break}else if(l)break}}}}},tokenize:function(e,t){var a=[e],r=t.rest;if(r){for(var i in r)t[i]=r[i];delete t.rest}return n.matchGrammar(e,a,t,0,0,!1),a},hooks:{all:{},add:function(e,t){var a=n.hooks.all;a[e]=a[e]||[],a[e].push(t)},run:function(e,t){var a=n.hooks.all[e];if(a&&a.length)for(var r,i=0;r=a[i++];)r(t)}}},a=n.Token=function(e,t,n,a,r){this.type=e,this.content=t,this.alias=n,this.length=0|(a||\\"\\").length,this.greedy=!!r};if(a.stringify=function(e,t,r){if(\\"string\\"==typeof e)return e;if(\\"Array\\"===n.util.type(e))return e.map(function(n){return a.stringify(n,t,e)}).join(\\"\\");var i={type:e.type,content:a.stringify(e.content,t,r),tag:\\"span\\",classes:[\\"token\\",e.type],attributes:{},language:t,parent:r};if(\\"comment\\"==i.type&&(i.attributes.spellcheck=\\"true\\"),e.alias){var l=\\"Array\\"===n.util.type(e.alias)?e.alias:[e.alias];Array.prototype.push.apply(i.classes,l)}n.hooks.run(\\"wrap\\",i);var o=Object.keys(i.attributes).map(function(e){return e+'=\\"'+(i.attributes[e]||\\"\\").replace(/\\"/g,\\"&quot;\\")+'\\"'}).join(\\" \\");return\\"<\\"+i.tag+' class=\\"'+i.classes.join(\\" \\")+'\\"'+(o?\\" \\"+o:\\"\\")+\\">\\"+i.content+\\"</\\"+i.tag+\\">\\"},!_self.document)return _self.addEventListener?(_self.addEventListener(\\"message\\",function(e){var t=JSON.parse(e.data),a=t.language,r=t.code,i=t.immediateClose;_self.postMessage(n.highlight(r,n.languages[a],a)),i&&_self.close()},!1),_self.Prism):_self.Prism;var r=document.currentScript||[].slice.call(document.getElementsByTagName(\\"script\\")).pop();return r&&(n.filename=r.src,n.manual||r.hasAttribute(\\"data-manual\\")||(\\"loading\\"!==document.readyState?window.requestAnimationFrame?window.requestAnimationFrame(n.highlightAll):window.setTimeout(n.highlightAll,16):document.addEventListener(\\"DOMContentLoaded\\",n.highlightAll))),_self.Prism}();\\"undefined\\"!=typeof module&&module.exports&&(module.exports=Prism),\\"undefined\\"!=typeof global&&(global.Prism=Prism);
Prism.languages.clike={comment:[{pattern:/(^|[^\\\\\\\\])\\\\/\\\\*[\\\\s\\\\S]*?(?:\\\\*\\\\/|$)/,lookbehind:!0},{pattern:/(^|[^\\\\\\\\:])\\\\/\\\\/.*/,lookbehind:!0}],string:{pattern:/([\\"'])(\\\\\\\\(?:\\\\r\\\\n|[\\\\s\\\\S])|(?!\\\\1)[^\\\\\\\\\\\\r\\\\n])*\\\\1/,greedy:!0},\\"class-name\\":{pattern:/((?:\\\\b(?:class|interface|extends|implements|trait|instanceof|new)\\\\s+)|(?:catch\\\\s+\\\\())[a-z0-9_\\\\.\\\\\\\\]+/i,lookbehind:!0,inside:{punctuation:/(\\\\.|\\\\\\\\)/}},keyword:/\\\\b(if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\\\\b/,\\"boolean\\":/\\\\b(true|false)\\\\b/,\\"function\\":/[a-z0-9_]+(?=\\\\()/i,number:/\\\\b-?(?:0x[\\\\da-f]+|\\\\d*\\\\.?\\\\d+(?:e[+-]?\\\\d+)?)\\\\b/i,operator:/--?|\\\\+\\\\+?|!=?=?|<=?|>=?|==?=?|&&?|\\\\|\\\\|?|\\\\?|\\\\*|\\\\/|~|\\\\^|%/,punctuation:/[{}[\\\\];(),.:]/};
Prism.languages.javascript=Prism.languages.extend(\\"clike\\",{keyword:/\\\\b(as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|var|void|while|with|yield)\\\\b/,number:/\\\\b-?(0[xX][\\\\dA-Fa-f]+|0[bB][01]+|0[oO][0-7]+|\\\\d*\\\\.?\\\\d+([Ee][+-]?\\\\d+)?|NaN|Infinity)\\\\b/,\\"function\\":/[_$a-zA-Z\\\\xA0-\\\\uFFFF][_$a-zA-Z0-9\\\\xA0-\\\\uFFFF]*(?=\\\\()/i,operator:/-[-=]?|\\\\+[+=]?|!=?=?|<<?=?|>>?>?=?|=(?:==?|>)?|&[&=]?|\\\\|[|=]?|\\\\*\\\\*?=?|\\\\/=?|~|\\\\^=?|%=?|\\\\?|\\\\.{3}/}),Prism.languages.insertBefore(\\"javascript\\",\\"keyword\\",{regex:{pattern:/(^|[^\\\\/])\\\\/(?!\\\\/)(\\\\[[^\\\\]\\\\r\\\\n]+]|\\\\\\\\.|[^\\\\/\\\\\\\\\\\\[\\\\r\\\\n])+\\\\/[gimyu]{0,5}(?=\\\\s*($|[\\\\r\\\\n,.;})]))/,lookbehind:!0,greedy:!0}}),Prism.languages.insertBefore(\\"javascript\\",\\"string\\",{\\"template-string\\":{pattern:/\`(?:\\\\\\\\\\\\\\\\|\\\\\\\\?[^\\\\\\\\])*?\`/,greedy:!0,inside:{interpolation:{pattern:/\\\\$\\\\{[^}]+\\\\}/,inside:{\\"interpolation-punctuation\\":{pattern:/^\\\\$\\\\{|\\\\}$/,alias:\\"punctuation\\"},rest:Prism.languages.javascript}},string:/[\\\\s\\\\S]+/}}}),Prism.languages.markup&&Prism.languages.insertBefore(\\"markup\\",\\"tag\\",{script:{pattern:/(<script[\\\\s\\\\S]*?>)[\\\\s\\\\S]*?(?=<\\\\/script>)/i,lookbehind:!0,inside:Prism.languages.javascript,alias:\\"language-javascript\\"}}),Prism.languages.js=Prism.languages.javascript;
Prism.languages.typescript=Prism.languages.extend(\\"javascript\\",{keyword:/\\\\b(as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|var|void|while|with|yield|false|true|module|declare|constructor|string|Function|any|number|boolean|Array|enum|symbol|namespace|abstract|require|type)\\\\b/}),Prism.languages.ts=Prism.languages.typescript;
!function(){function e(e,t){return Array.prototype.slice.call((t||document).querySelectorAll(e))}function t(e,t){return t=\\" \\"+t+\\" \\",(\\" \\"+e.className+\\" \\").replace(/[\\\\n\\\\t]/g,\\" \\").indexOf(t)>-1}function n(e,n,i){for(var o,a=n.replace(/\\\\s+/g,\\"\\").split(\\",\\"),l=+e.getAttribute(\\"data-line-offset\\")||0,d=r()?parseInt:parseFloat,c=d(getComputedStyle(e).lineHeight),s=0;o=a[s++];){o=o.split(\\"-\\");var u=+o[0],m=+o[1]||u,h=document.createElement(\\"div\\");h.textContent=Array(m-u+2).join(\\" \\\\n\\"),h.setAttribute(\\"aria-hidden\\",\\"true\\"),h.className=(i||\\"\\")+\\" line-highlight\\",t(e,\\"line-numbers\\")||(h.setAttribute(\\"data-start\\",u),m>u&&h.setAttribute(\\"data-end\\",m)),h.style.top=(u-l-1)*c+\\"px\\",t(e,\\"line-numbers\\")?e.appendChild(h):(e.querySelector(\\"code\\")||e).appendChild(h)}}function i(){var t=location.hash.slice(1);e(\\".temporary.line-highlight\\").forEach(function(e){e.parentNode.removeChild(e)});var i=(t.match(/\\\\.([\\\\d,-]+)$/)||[,\\"\\"])[1];if(i&&!document.getElementById(t)){var r=t.slice(0,t.lastIndexOf(\\".\\")),o=document.getElementById(r);o&&(o.hasAttribute(\\"data-line\\")||o.setAttribute(\\"data-line\\",\\"\\"),n(o,i,\\"temporary \\"),document.querySelector(\\".temporary.line-highlight\\").scrollIntoView())}}if(\\"undefined\\"!=typeof self&&self.Prism&&self.document&&document.querySelector){var r=function(){var e;return function(){if(\\"undefined\\"==typeof e){var t=document.createElement(\\"div\\");t.style.fontSize=\\"13px\\",t.style.lineHeight=\\"1.5\\",t.style.padding=0,t.style.border=0,t.innerHTML=\\"&nbsp;<br />&nbsp;\\",document.body.appendChild(t),e=38===t.offsetHeight,document.body.removeChild(t)}return e}}(),o=0;Prism.hooks.add(\\"before-sanity-check\\",function(t){var n=t.element.parentNode,i=n&&n.getAttribute(\\"data-line\\");if(n&&i&&/pre/i.test(n.nodeName)){var r=0;e(\\".line-highlight\\",n).forEach(function(e){r+=e.textContent.length,e.parentNode.removeChild(e)}),r&&/^( \\\\n)+$/.test(t.code.slice(-r))&&(t.code=t.code.slice(0,-r))}}),Prism.hooks.add(\\"complete\\",function(e){var t=e.element.parentNode,r=t&&t.getAttribute(\\"data-line\\");t&&r&&/pre/i.test(t.nodeName)&&(clearTimeout(o),n(t,r),o=setTimeout(i,1))}),window.addEventListener(\\"hashchange\\",i)}}();
!function(){if(\\"undefined\\"!=typeof self&&self.Prism&&self.document){var e=\\"line-numbers\\",t=function(e){var t=n(e),r=t[\\"white-space\\"];if(\\"pre-wrap\\"===r||\\"pre-line\\"===r){var s=e.querySelector(\\"code\\"),l=e.querySelector(\\".line-numbers-rows\\"),a=e.querySelector(\\".line-numbers-sizer\\"),i=e.textContent.split(\\"\\\\n\\");a||(a=document.createElement(\\"span\\"),a.className=\\"line-numbers-sizer\\",s.appendChild(a)),a.style.display=\\"block\\",i.forEach(function(e,t){a.textContent=e||\\"\\\\n\\";var n=a.getBoundingClientRect().height;l.children[t].style.height=n+\\"px\\"}),a.textContent=\\"\\",a.style.display=\\"none\\"}},n=function(e){return e?window.getComputedStyle?getComputedStyle(e):e.currentStyle||null:null};window.addEventListener(\\"resize\\",function(){Array.prototype.forEach.call(document.querySelectorAll(\\"pre.\\"+e),t)}),Prism.hooks.add(\\"complete\\",function(e){if(e.code){var n=e.element.parentNode,r=/\\\\s*\\\\bline-numbers\\\\b\\\\s*/;if(n&&/pre/i.test(n.nodeName)&&(r.test(n.className)||r.test(e.element.className))&&!e.element.querySelector(\\".line-numbers-rows\\")){r.test(e.element.className)&&(e.element.className=e.element.className.replace(r,\\" \\")),r.test(n.className)||(n.className+=\\" line-numbers\\");var s,l=e.code.match(/\\\\n(?!$)/g),a=l?l.length+1:1,i=new Array(a+1);i=i.join(\\"<span></span>\\"),s=document.createElement(\\"span\\"),s.setAttribute(\\"aria-hidden\\",\\"true\\"),s.className=\\"line-numbers-rows\\",s.innerHTML=i,n.hasAttribute(\\"data-start\\")&&(n.style.counterReset=\\"linenumber \\"+(parseInt(n.getAttribute(\\"data-start\\"),10)-1)),e.element.appendChild(s),t(n)}}})}}();
</script>

      <style>
        body {
          background-color: #252526;
          color: #FFF;
          margin: 0;
          padding: 20px;
        }
        .error-message {
          font-family: Consolas, fixed;
          font-size: 120%;
          margin-bottom: 20px;
          border-radius: 5px 5px 0 0;
          display: flex;
          overflow: hidden;
        }
        .error-message__name {
          padding: 20px;
          background-color: #600;
        }
        .error-message__message {
          padding: 20px;
          background-color: #900;
          flex-grow: 1;
        }
        .error-info {
          background-color: #1E1E1E;
          border-radius: 0 0 5px 5px;
          margin-bottom: 20px;
        }
        .error-details {
          white-space: pre;
          font-family: Consolas, fixed;
          font-size: 80%;
          padding: 20px;
          background-color: #111;
        }
        .stack-trace {
          font-family: Consolas, fixed;
          padding: 20px;
        }
        .stack-line {

        }
        .stack-line__match,
        .stack-line__column {
          display: none;
        }
        .stack-frame {
          background-color: #1E1E1E;
          padding: 0;
          margin-bottom: 20px;
          border-radius: 5px;
          overflow: hidden;
        }
        .source-file {
          font-weight: bold;
          font-family: Consolas, fixed;
          padding: 8px 10px;
          background-color: #000;
        }
        .source-file__filename {
          text-decoration: underline;
        }
        .source-lines {
          font-family: Consolas, fixed;
          padding: 0;
          margin: 0;
          color: #5A5A5A;
        }
        .source-lines__line {
          padding: 5px 10px;
          margin: 0;
          white-space: pre;
          list-style: decimal inside none;
        }
        .source-lines__line span {
          color: #FFF;
        }
        .source-lines__line--main {
          background-color: #111;
        }
        .no-context {
          padding: 20px;
        }
        .source-code {
          padding-left: 0 !important;
          margin: 0 !important;
          background-color: transparent !important;
        }
        .source-code code {
          display: inline-block;
        }
      </style>
    </head>
    <body>
      <div class=\\"error-info\\">
        <div class=\\"error-message\\">
          <div class=\\"error-message__name\\">DetailedError</div>
          <div class=\\"error-message__message\\">Cyclic error</div>
        </div>
        
    <ol class=\\"stack-trace\\">
      
    <li>
      <span class=\\"stack-line__source\\">src/example/app.ts:73</span>
      <span class=\\"stack-line__method\\">(app.get)</span>
    </li>
  
    </ol>
  
        <div class=\\"error-details\\"><em>error details contained circular reference</em></div>
      </div>
      
    <div class=\\"stack-frame\\">
      <div class=\\"source-file\\">
        <span class=\\"source-file__index\\">#1</span>
        <span class=\\"source-file__filename\\">src/example/app.ts</span>:<span class=\\"source-file__line\\">67</span>
      </div>
      
    <pre class=\\"source-code line-numbers\\" data-start=\\"47\\" data-line=\\"21\\">
      <code class=\\"language-typescript\\">    next(new Error(\\"Forwarded error message\\"));
  });

  // object error
  app.get(\\"/object-error\\", (_request, _response, next) => {
    next({
      message: \\"Test message\\",
    });
  });

  // detailed error
  app.get(\\"/detailed-error\\", (_request, _response, next) => {
    next(
      new DetailedError(\\"Cyclic error\\", {
        foo: \\"bar\\",
      }),
    );
  });

  // error contains cyclic data
  app.get(\\"/cyclic-error\\", (_request, _response, next) => {
    const a: { [x: string]: any } = { child: null };
    const b = { child: a };
    a.child = b;

    next(
      new DetailedError(\\"Cyclic error\\", {
        a,
      }),
    );
  });

  // render express errors, add this as the last middleware
  app.use(
    expressErrorRenderer({
      // application base path, used to decide which stack frames to include and for formatting the error source location
      basePath: path.join(__dirname, \\"..\\", \\"..\\"),

      // should error details and stack traces be shown
      debug: true,
</code></pre>
  
    </div>
  
    </body>
    </html>
  "
`;

exports[`create-user-route should render forwarded error 1`] = `
"
    <html>
    <head>
      <meta charset=\\"utf-8\\"/>
      <title>Error</title>

      <style>/* http://meyerweb.com/eric/tools/css/reset/
   v2.0 | 20110126
   License: none (public domain)
*/

html,
body,
div,
span,
applet,
object,
iframe,
h1,
h2,
h3,
h4,
h5,
h6,
p,
blockquote,
pre,
a,
abbr,
acronym,
address,
big,
cite,
code,
del,
dfn,
em,
img,
ins,
kbd,
q,
s,
samp,
small,
strike,
strong,
sub,
sup,
tt,
var,
b,
u,
i,
center,
dl,
dt,
dd,
ol,
ul,
li,
fieldset,
form,
label,
legend,
table,
caption,
tbody,
tfoot,
thead,
tr,
th,
td,
article,
aside,
canvas,
details,
embed,
figure,
figcaption,
footer,
header,
hgroup,
menu,
nav,
output,
ruby,
section,
summary,
time,
mark,
audio,
video {
	margin: 0;
	padding: 0;
	border: 0;
	font-size: 100%;
	font: inherit;
	vertical-align: baseline;
}
/* HTML5 display-role reset for older browsers */
article,
aside,
details,
figcaption,
figure,
footer,
header,
hgroup,
menu,
nav,
section {
	display: block;
}
body {
	line-height: 1;
}
ol,
ul {
	list-style: none;
}
blockquote,
q {
	quotes: none;
}
blockquote:before,
blockquote:after,
q:before,
q:after {
	content: '';
	content: none;
}
table {
	border-collapse: collapse;
	border-spacing: 0;
}

/* http://prismjs.com/download.html?themes=prism-okaidia&languages=clike+javascript+typescript&plugins=line-highlight+line-numbers */
/**
 * okaidia theme for JavaScript, CSS and HTML
 * Loosely based on Monokai textmate theme by http://www.monokai.nl/
 * @author ocodia
 */

code[class*='language-'],
pre[class*='language-'] {
	color: #f8f8f2;
	background: none;
	text-shadow: 0 1px rgba(0, 0, 0, 0.3);
	font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	word-wrap: normal;
	line-height: 1.5;

	-moz-tab-size: 4;
	-o-tab-size: 4;
	tab-size: 4;

	-webkit-hyphens: none;
	-moz-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
}

/* Code blocks */
pre[class*='language-'] {
	padding: 1em;
	margin: 0.5em 0;
	overflow: auto;
	border-radius: 0.3em;
}

:not(pre) > code[class*='language-'],
pre[class*='language-'] {
	background: #272822;
}

/* Inline code */
:not(pre) > code[class*='language-'] {
	padding: 0.1em;
	border-radius: 0.3em;
	white-space: normal;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
	color: slategray;
}

.token.punctuation {
	color: #f8f8f2;
}

.namespace {
	opacity: 0.7;
}

.token.property,
.token.tag,
.token.constant,
.token.symbol,
.token.deleted {
	color: #f92672;
}

.token.boolean,
.token.number {
	color: #ae81ff;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
	color: #a6e22e;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string,
.token.variable {
	color: #f8f8f2;
}

.token.atrule,
.token.attr-value,
.token.function {
	color: #e6db74;
}

.token.keyword {
	color: #66d9ef;
}

.token.regex,
.token.important {
	color: #fd971f;
}

.token.important,
.token.bold {
	font-weight: bold;
}
.token.italic {
	font-style: italic;
}

.token.entity {
	cursor: help;
}

pre[data-line] {
	position: relative;
	padding: 1em 0 1em 3em;
}

.line-highlight {
	position: absolute;
	left: 0;
	right: 0;
	padding: inherit 0;
	margin-top: 1em; /* Same as .prismâ€™s padding-top */

	background: hsla(24, 20%, 50%, 0.08);
	background: linear-gradient(to right, hsla(24, 20%, 50%, 0.1) 70%, hsla(24, 20%, 50%, 0));

	pointer-events: none;

	line-height: inherit;
	white-space: pre;
}

.line-highlight:before,
.line-highlight[data-end]:after {
	content: attr(data-start);
	position: absolute;
	top: 0.4em;
	left: 0.6em;
	min-width: 1em;
	padding: 0 0.5em;
	background-color: hsla(24, 20%, 50%, 0.4);
	color: hsl(24, 20%, 95%);
	font: bold 65%/1.5 sans-serif;
	text-align: center;
	vertical-align: 0.3em;
	border-radius: 999px;
	text-shadow: none;
	box-shadow: 0 1px white;
}

.line-highlight[data-end]:after {
	content: attr(data-end);
	top: auto;
	bottom: 0.4em;
}

pre.line-numbers {
	position: relative;
	padding-left: 3.8em;
	counter-reset: linenumber;
}

pre.line-numbers > code {
	position: relative;
	white-space: inherit;
}

.line-numbers .line-numbers-rows {
	position: absolute;
	pointer-events: none;
	top: 0;
	font-size: 100%;
	left: -3.8em;
	width: 3em; /* works for line-numbers below 1000 lines */
	letter-spacing: -1px;
	border-right: 1px solid #999;

	-webkit-user-select: none;
	-moz-user-select: none;
	-ms-user-select: none;
	user-select: none;
}

.line-numbers-rows > span {
	pointer-events: none;
	display: block;
	counter-increment: linenumber;
}

.line-numbers-rows > span:before {
	content: counter(linenumber);
	color: #999;
	display: block;
	padding-right: 0.8em;
	text-align: right;
}
</style>
      <script>/* http://prismjs.com/download.html?themes=prism-okaidia&languages=clike+javascript+typescript&plugins=line-highlight+line-numbers */
var _self=\\"undefined\\"!=typeof window?window:\\"undefined\\"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},Prism=function(){var e=/\\\\blang(?:uage)?-(\\\\w+)\\\\b/i,t=0,n=_self.Prism={manual:_self.Prism&&_self.Prism.manual,util:{encode:function(e){return e instanceof a?new a(e.type,n.util.encode(e.content),e.alias):\\"Array\\"===n.util.type(e)?e.map(n.util.encode):e.replace(/&/g,\\"&amp;\\").replace(/</g,\\"&lt;\\").replace(/\\\\u00a0/g,\\" \\")},type:function(e){return Object.prototype.toString.call(e).match(/\\\\[object (\\\\w+)\\\\]/)[1]},objId:function(e){return e.__id||Object.defineProperty(e,\\"__id\\",{value:++t}),e.__id},clone:function(e){var t=n.util.type(e);switch(t){case\\"Object\\":var a={};for(var r in e)e.hasOwnProperty(r)&&(a[r]=n.util.clone(e[r]));return a;case\\"Array\\":return e.map(function(e){return n.util.clone(e)})}return e}},languages:{extend:function(e,t){var a=n.util.clone(n.languages[e]);for(var r in t)a[r]=t[r];return a},insertBefore:function(e,t,a,r){r=r||n.languages;var i=r[e];if(2==arguments.length){a=arguments[1];for(var l in a)a.hasOwnProperty(l)&&(i[l]=a[l]);return i}var o={};for(var s in i)if(i.hasOwnProperty(s)){if(s==t)for(var l in a)a.hasOwnProperty(l)&&(o[l]=a[l]);o[s]=i[s]}return n.languages.DFS(n.languages,function(t,n){n===r[e]&&t!=e&&(this[t]=o)}),r[e]=o},DFS:function(e,t,a,r){r=r||{};for(var i in e)e.hasOwnProperty(i)&&(t.call(e,i,e[i],a||i),\\"Object\\"!==n.util.type(e[i])||r[n.util.objId(e[i])]?\\"Array\\"!==n.util.type(e[i])||r[n.util.objId(e[i])]||(r[n.util.objId(e[i])]=!0,n.languages.DFS(e[i],t,i,r)):(r[n.util.objId(e[i])]=!0,n.languages.DFS(e[i],t,null,r)))}},plugins:{},highlightAll:function(e,t){var a={callback:t,selector:'code[class*=\\"language-\\"], [class*=\\"language-\\"] code, code[class*=\\"lang-\\"], [class*=\\"lang-\\"] code'};n.hooks.run(\\"before-highlightall\\",a);for(var r,i=a.elements||document.querySelectorAll(a.selector),l=0;r=i[l++];)n.highlightElement(r,e===!0,a.callback)},highlightElement:function(t,a,r){for(var i,l,o=t;o&&!e.test(o.className);)o=o.parentNode;o&&(i=(o.className.match(e)||[,\\"\\"])[1].toLowerCase(),l=n.languages[i]),t.className=t.className.replace(e,\\"\\").replace(/\\\\s+/g,\\" \\")+\\" language-\\"+i,o=t.parentNode,/pre/i.test(o.nodeName)&&(o.className=o.className.replace(e,\\"\\").replace(/\\\\s+/g,\\" \\")+\\" language-\\"+i);var s=t.textContent,u={element:t,language:i,grammar:l,code:s};if(n.hooks.run(\\"before-sanity-check\\",u),!u.code||!u.grammar)return u.code&&(n.hooks.run(\\"before-highlight\\",u),u.element.textContent=u.code,n.hooks.run(\\"after-highlight\\",u)),n.hooks.run(\\"complete\\",u),void 0;if(n.hooks.run(\\"before-highlight\\",u),a&&_self.Worker){var g=new Worker(n.filename);g.onmessage=function(e){u.highlightedCode=e.data,n.hooks.run(\\"before-insert\\",u),u.element.innerHTML=u.highlightedCode,r&&r.call(u.element),n.hooks.run(\\"after-highlight\\",u),n.hooks.run(\\"complete\\",u)},g.postMessage(JSON.stringify({language:u.language,code:u.code,immediateClose:!0}))}else u.highlightedCode=n.highlight(u.code,u.grammar,u.language),n.hooks.run(\\"before-insert\\",u),u.element.innerHTML=u.highlightedCode,r&&r.call(t),n.hooks.run(\\"after-highlight\\",u),n.hooks.run(\\"complete\\",u)},highlight:function(e,t,r){var i=n.tokenize(e,t);return a.stringify(n.util.encode(i),r)},matchGrammar:function(e,t,a,r,i,l,o){var s=n.Token;for(var u in a)if(a.hasOwnProperty(u)&&a[u]){if(u==o)return;var g=a[u];g=\\"Array\\"===n.util.type(g)?g:[g];for(var c=0;c<g.length;++c){var h=g[c],f=h.inside,d=!!h.lookbehind,m=!!h.greedy,p=0,y=h.alias;if(m&&!h.pattern.global){var v=h.pattern.toString().match(/[imuy]*$/)[0];h.pattern=RegExp(h.pattern.source,v+\\"g\\")}h=h.pattern||h;for(var b=r,k=i;b<t.length;k+=t[b].length,++b){var w=t[b];if(t.length>e.length)return;if(!(w instanceof s)){h.lastIndex=0;var _=h.exec(w),P=1;if(!_&&m&&b!=t.length-1){if(h.lastIndex=k,_=h.exec(e),!_)break;for(var A=_.index+(d?_[1].length:0),j=_.index+_[0].length,x=b,O=k,S=t.length;S>x&&(j>O||!t[x].type&&!t[x-1].greedy);++x)O+=t[x].length,A>=O&&(++b,k=O);if(t[b]instanceof s||t[x-1].greedy)continue;P=x-b,w=e.slice(k,O),_.index-=k}if(_){d&&(p=_[1].length);var A=_.index+p,_=_[0].slice(p),j=A+_.length,N=w.slice(0,A),C=w.slice(j),E=[b,P];N&&(++b,k+=N.length,E.push(N));var I=new s(u,f?n.tokenize(_,f):_,y,_,m);if(E.push(I),C&&E.push(C),Array.prototype.splice.apply(t,E),1!=P&&n.matchGrammar(e,t,a,b,k,!0,u),l)break}else if(l)break}}}}},tokenize:function(e,t){var a=[e],r=t.rest;if(r){for(var i in r)t[i]=r[i];delete t.rest}return n.matchGrammar(e,a,t,0,0,!1),a},hooks:{all:{},add:function(e,t){var a=n.hooks.all;a[e]=a[e]||[],a[e].push(t)},run:function(e,t){var a=n.hooks.all[e];if(a&&a.length)for(var r,i=0;r=a[i++];)r(t)}}},a=n.Token=function(e,t,n,a,r){this.type=e,this.content=t,this.alias=n,this.length=0|(a||\\"\\").length,this.greedy=!!r};if(a.stringify=function(e,t,r){if(\\"string\\"==typeof e)return e;if(\\"Array\\"===n.util.type(e))return e.map(function(n){return a.stringify(n,t,e)}).join(\\"\\");var i={type:e.type,content:a.stringify(e.content,t,r),tag:\\"span\\",classes:[\\"token\\",e.type],attributes:{},language:t,parent:r};if(\\"comment\\"==i.type&&(i.attributes.spellcheck=\\"true\\"),e.alias){var l=\\"Array\\"===n.util.type(e.alias)?e.alias:[e.alias];Array.prototype.push.apply(i.classes,l)}n.hooks.run(\\"wrap\\",i);var o=Object.keys(i.attributes).map(function(e){return e+'=\\"'+(i.attributes[e]||\\"\\").replace(/\\"/g,\\"&quot;\\")+'\\"'}).join(\\" \\");return\\"<\\"+i.tag+' class=\\"'+i.classes.join(\\" \\")+'\\"'+(o?\\" \\"+o:\\"\\")+\\">\\"+i.content+\\"</\\"+i.tag+\\">\\"},!_self.document)return _self.addEventListener?(_self.addEventListener(\\"message\\",function(e){var t=JSON.parse(e.data),a=t.language,r=t.code,i=t.immediateClose;_self.postMessage(n.highlight(r,n.languages[a],a)),i&&_self.close()},!1),_self.Prism):_self.Prism;var r=document.currentScript||[].slice.call(document.getElementsByTagName(\\"script\\")).pop();return r&&(n.filename=r.src,n.manual||r.hasAttribute(\\"data-manual\\")||(\\"loading\\"!==document.readyState?window.requestAnimationFrame?window.requestAnimationFrame(n.highlightAll):window.setTimeout(n.highlightAll,16):document.addEventListener(\\"DOMContentLoaded\\",n.highlightAll))),_self.Prism}();\\"undefined\\"!=typeof module&&module.exports&&(module.exports=Prism),\\"undefined\\"!=typeof global&&(global.Prism=Prism);
Prism.languages.clike={comment:[{pattern:/(^|[^\\\\\\\\])\\\\/\\\\*[\\\\s\\\\S]*?(?:\\\\*\\\\/|$)/,lookbehind:!0},{pattern:/(^|[^\\\\\\\\:])\\\\/\\\\/.*/,lookbehind:!0}],string:{pattern:/([\\"'])(\\\\\\\\(?:\\\\r\\\\n|[\\\\s\\\\S])|(?!\\\\1)[^\\\\\\\\\\\\r\\\\n])*\\\\1/,greedy:!0},\\"class-name\\":{pattern:/((?:\\\\b(?:class|interface|extends|implements|trait|instanceof|new)\\\\s+)|(?:catch\\\\s+\\\\())[a-z0-9_\\\\.\\\\\\\\]+/i,lookbehind:!0,inside:{punctuation:/(\\\\.|\\\\\\\\)/}},keyword:/\\\\b(if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\\\\b/,\\"boolean\\":/\\\\b(true|false)\\\\b/,\\"function\\":/[a-z0-9_]+(?=\\\\()/i,number:/\\\\b-?(?:0x[\\\\da-f]+|\\\\d*\\\\.?\\\\d+(?:e[+-]?\\\\d+)?)\\\\b/i,operator:/--?|\\\\+\\\\+?|!=?=?|<=?|>=?|==?=?|&&?|\\\\|\\\\|?|\\\\?|\\\\*|\\\\/|~|\\\\^|%/,punctuation:/[{}[\\\\];(),.:]/};
Prism.languages.javascript=Prism.languages.extend(\\"clike\\",{keyword:/\\\\b(as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|var|void|while|with|yield)\\\\b/,number:/\\\\b-?(0[xX][\\\\dA-Fa-f]+|0[bB][01]+|0[oO][0-7]+|\\\\d*\\\\.?\\\\d+([Ee][+-]?\\\\d+)?|NaN|Infinity)\\\\b/,\\"function\\":/[_$a-zA-Z\\\\xA0-\\\\uFFFF][_$a-zA-Z0-9\\\\xA0-\\\\uFFFF]*(?=\\\\()/i,operator:/-[-=]?|\\\\+[+=]?|!=?=?|<<?=?|>>?>?=?|=(?:==?|>)?|&[&=]?|\\\\|[|=]?|\\\\*\\\\*?=?|\\\\/=?|~|\\\\^=?|%=?|\\\\?|\\\\.{3}/}),Prism.languages.insertBefore(\\"javascript\\",\\"keyword\\",{regex:{pattern:/(^|[^\\\\/])\\\\/(?!\\\\/)(\\\\[[^\\\\]\\\\r\\\\n]+]|\\\\\\\\.|[^\\\\/\\\\\\\\\\\\[\\\\r\\\\n])+\\\\/[gimyu]{0,5}(?=\\\\s*($|[\\\\r\\\\n,.;})]))/,lookbehind:!0,greedy:!0}}),Prism.languages.insertBefore(\\"javascript\\",\\"string\\",{\\"template-string\\":{pattern:/\`(?:\\\\\\\\\\\\\\\\|\\\\\\\\?[^\\\\\\\\])*?\`/,greedy:!0,inside:{interpolation:{pattern:/\\\\$\\\\{[^}]+\\\\}/,inside:{\\"interpolation-punctuation\\":{pattern:/^\\\\$\\\\{|\\\\}$/,alias:\\"punctuation\\"},rest:Prism.languages.javascript}},string:/[\\\\s\\\\S]+/}}}),Prism.languages.markup&&Prism.languages.insertBefore(\\"markup\\",\\"tag\\",{script:{pattern:/(<script[\\\\s\\\\S]*?>)[\\\\s\\\\S]*?(?=<\\\\/script>)/i,lookbehind:!0,inside:Prism.languages.javascript,alias:\\"language-javascript\\"}}),Prism.languages.js=Prism.languages.javascript;
Prism.languages.typescript=Prism.languages.extend(\\"javascript\\",{keyword:/\\\\b(as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|var|void|while|with|yield|false|true|module|declare|constructor|string|Function|any|number|boolean|Array|enum|symbol|namespace|abstract|require|type)\\\\b/}),Prism.languages.ts=Prism.languages.typescript;
!function(){function e(e,t){return Array.prototype.slice.call((t||document).querySelectorAll(e))}function t(e,t){return t=\\" \\"+t+\\" \\",(\\" \\"+e.className+\\" \\").replace(/[\\\\n\\\\t]/g,\\" \\").indexOf(t)>-1}function n(e,n,i){for(var o,a=n.replace(/\\\\s+/g,\\"\\").split(\\",\\"),l=+e.getAttribute(\\"data-line-offset\\")||0,d=r()?parseInt:parseFloat,c=d(getComputedStyle(e).lineHeight),s=0;o=a[s++];){o=o.split(\\"-\\");var u=+o[0],m=+o[1]||u,h=document.createElement(\\"div\\");h.textContent=Array(m-u+2).join(\\" \\\\n\\"),h.setAttribute(\\"aria-hidden\\",\\"true\\"),h.className=(i||\\"\\")+\\" line-highlight\\",t(e,\\"line-numbers\\")||(h.setAttribute(\\"data-start\\",u),m>u&&h.setAttribute(\\"data-end\\",m)),h.style.top=(u-l-1)*c+\\"px\\",t(e,\\"line-numbers\\")?e.appendChild(h):(e.querySelector(\\"code\\")||e).appendChild(h)}}function i(){var t=location.hash.slice(1);e(\\".temporary.line-highlight\\").forEach(function(e){e.parentNode.removeChild(e)});var i=(t.match(/\\\\.([\\\\d,-]+)$/)||[,\\"\\"])[1];if(i&&!document.getElementById(t)){var r=t.slice(0,t.lastIndexOf(\\".\\")),o=document.getElementById(r);o&&(o.hasAttribute(\\"data-line\\")||o.setAttribute(\\"data-line\\",\\"\\"),n(o,i,\\"temporary \\"),document.querySelector(\\".temporary.line-highlight\\").scrollIntoView())}}if(\\"undefined\\"!=typeof self&&self.Prism&&self.document&&document.querySelector){var r=function(){var e;return function(){if(\\"undefined\\"==typeof e){var t=document.createElement(\\"div\\");t.style.fontSize=\\"13px\\",t.style.lineHeight=\\"1.5\\",t.style.padding=0,t.style.border=0,t.innerHTML=\\"&nbsp;<br />&nbsp;\\",document.body.appendChild(t),e=38===t.offsetHeight,document.body.removeChild(t)}return e}}(),o=0;Prism.hooks.add(\\"before-sanity-check\\",function(t){var n=t.element.parentNode,i=n&&n.getAttribute(\\"data-line\\");if(n&&i&&/pre/i.test(n.nodeName)){var r=0;e(\\".line-highlight\\",n).forEach(function(e){r+=e.textContent.length,e.parentNode.removeChild(e)}),r&&/^( \\\\n)+$/.test(t.code.slice(-r))&&(t.code=t.code.slice(0,-r))}}),Prism.hooks.add(\\"complete\\",function(e){var t=e.element.parentNode,r=t&&t.getAttribute(\\"data-line\\");t&&r&&/pre/i.test(t.nodeName)&&(clearTimeout(o),n(t,r),o=setTimeout(i,1))}),window.addEventListener(\\"hashchange\\",i)}}();
!function(){if(\\"undefined\\"!=typeof self&&self.Prism&&self.document){var e=\\"line-numbers\\",t=function(e){var t=n(e),r=t[\\"white-space\\"];if(\\"pre-wrap\\"===r||\\"pre-line\\"===r){var s=e.querySelector(\\"code\\"),l=e.querySelector(\\".line-numbers-rows\\"),a=e.querySelector(\\".line-numbers-sizer\\"),i=e.textContent.split(\\"\\\\n\\");a||(a=document.createElement(\\"span\\"),a.className=\\"line-numbers-sizer\\",s.appendChild(a)),a.style.display=\\"block\\",i.forEach(function(e,t){a.textContent=e||\\"\\\\n\\";var n=a.getBoundingClientRect().height;l.children[t].style.height=n+\\"px\\"}),a.textContent=\\"\\",a.style.display=\\"none\\"}},n=function(e){return e?window.getComputedStyle?getComputedStyle(e):e.currentStyle||null:null};window.addEventListener(\\"resize\\",function(){Array.prototype.forEach.call(document.querySelectorAll(\\"pre.\\"+e),t)}),Prism.hooks.add(\\"complete\\",function(e){if(e.code){var n=e.element.parentNode,r=/\\\\s*\\\\bline-numbers\\\\b\\\\s*/;if(n&&/pre/i.test(n.nodeName)&&(r.test(n.className)||r.test(e.element.className))&&!e.element.querySelector(\\".line-numbers-rows\\")){r.test(e.element.className)&&(e.element.className=e.element.className.replace(r,\\" \\")),r.test(n.className)||(n.className+=\\" line-numbers\\");var s,l=e.code.match(/\\\\n(?!$)/g),a=l?l.length+1:1,i=new Array(a+1);i=i.join(\\"<span></span>\\"),s=document.createElement(\\"span\\"),s.setAttribute(\\"aria-hidden\\",\\"true\\"),s.className=\\"line-numbers-rows\\",s.innerHTML=i,n.hasAttribute(\\"data-start\\")&&(n.style.counterReset=\\"linenumber \\"+(parseInt(n.getAttribute(\\"data-start\\"),10)-1)),e.element.appendChild(s),t(n)}}})}}();
</script>

      <style>
        body {
          background-color: #252526;
          color: #FFF;
          margin: 0;
          padding: 20px;
        }
        .error-message {
          font-family: Consolas, fixed;
          font-size: 120%;
          margin-bottom: 20px;
          border-radius: 5px 5px 0 0;
          display: flex;
          overflow: hidden;
        }
        .error-message__name {
          padding: 20px;
          background-color: #600;
        }
        .error-message__message {
          padding: 20px;
          background-color: #900;
          flex-grow: 1;
        }
        .error-info {
          background-color: #1E1E1E;
          border-radius: 0 0 5px 5px;
          margin-bottom: 20px;
        }
        .error-details {
          white-space: pre;
          font-family: Consolas, fixed;
          font-size: 80%;
          padding: 20px;
          background-color: #111;
        }
        .stack-trace {
          font-family: Consolas, fixed;
          padding: 20px;
        }
        .stack-line {

        }
        .stack-line__match,
        .stack-line__column {
          display: none;
        }
        .stack-frame {
          background-color: #1E1E1E;
          padding: 0;
          margin-bottom: 20px;
          border-radius: 5px;
          overflow: hidden;
        }
        .source-file {
          font-weight: bold;
          font-family: Consolas, fixed;
          padding: 8px 10px;
          background-color: #000;
        }
        .source-file__filename {
          text-decoration: underline;
        }
        .source-lines {
          font-family: Consolas, fixed;
          padding: 0;
          margin: 0;
          color: #5A5A5A;
        }
        .source-lines__line {
          padding: 5px 10px;
          margin: 0;
          white-space: pre;
          list-style: decimal inside none;
        }
        .source-lines__line span {
          color: #FFF;
        }
        .source-lines__line--main {
          background-color: #111;
        }
        .no-context {
          padding: 20px;
        }
        .source-code {
          padding-left: 0 !important;
          margin: 0 !important;
          background-color: transparent !important;
        }
        .source-code code {
          display: inline-block;
        }
      </style>
    </head>
    <body>
      <div class=\\"error-info\\">
        <div class=\\"error-message\\">
          <div class=\\"error-message__name\\">Error</div>
          <div class=\\"error-message__message\\">Forwarded error message</div>
        </div>
        
    <ol class=\\"stack-trace\\">
      
    <li>
      <span class=\\"stack-line__source\\">src/example/app.ts:47</span>
      <span class=\\"stack-line__method\\">(app.get)</span>
    </li>
  
    </ol>
  
        
      </div>
      
    <div class=\\"stack-frame\\">
      <div class=\\"source-file\\">
        <span class=\\"source-file__index\\">#1</span>
        <span class=\\"source-file__filename\\">src/example/app.ts</span>:<span class=\\"source-file__line\\">48</span>
      </div>
      
    <pre class=\\"source-code line-numbers\\" data-start=\\"28\\" data-line=\\"21\\">
      <code class=\\"language-typescript\\">  app.get(\\"/\\", (_request, response, _next) => {
    response.send(\`
      <ul>
        <li><a href=\\"/throw-error\\">Throw error</a></li>
        <li><a href=\\"/next-error\\">Next error</a></li>
        <li><a href=\\"/object-error\\">Object error</a></li>
        <li><a href=\\"/detailed-error\\">Detailed error</a></li>
        <li><a href=\\"/cyclic-error\\">Cyclic error</a></li>
      </ul>
    \`);
  });

  // throws an error
  app.get(\\"/throw-error\\", (_request, _response, _next) => {
    throw new Error(\\"Thrown error message\\");
  });

  // forwards an error
  app.get(\\"/next-error\\", (_request, _response, next) => {
    next(new Error(\\"Forwarded error message\\"));
  });

  // object error
  app.get(\\"/object-error\\", (_request, _response, next) => {
    next({
      message: \\"Test message\\",
    });
  });

  // detailed error
  app.get(\\"/detailed-error\\", (_request, _response, next) => {
    next(
      new DetailedError(\\"Cyclic error\\", {
        foo: \\"bar\\",
      }),
    );
  });

  // error contains cyclic data
  app.get(\\"/cyclic-error\\", (_request, _response, next) => {
    const a: { [x: string]: any } = { child: null };</code></pre>
  
    </div>
  
    </body>
    </html>
  "
`;

exports[`create-user-route should render thrown error 1`] = `
"
    <html>
    <head>
      <meta charset=\\"utf-8\\"/>
      <title>Error</title>

      <style>/* http://meyerweb.com/eric/tools/css/reset/
   v2.0 | 20110126
   License: none (public domain)
*/

html,
body,
div,
span,
applet,
object,
iframe,
h1,
h2,
h3,
h4,
h5,
h6,
p,
blockquote,
pre,
a,
abbr,
acronym,
address,
big,
cite,
code,
del,
dfn,
em,
img,
ins,
kbd,
q,
s,
samp,
small,
strike,
strong,
sub,
sup,
tt,
var,
b,
u,
i,
center,
dl,
dt,
dd,
ol,
ul,
li,
fieldset,
form,
label,
legend,
table,
caption,
tbody,
tfoot,
thead,
tr,
th,
td,
article,
aside,
canvas,
details,
embed,
figure,
figcaption,
footer,
header,
hgroup,
menu,
nav,
output,
ruby,
section,
summary,
time,
mark,
audio,
video {
	margin: 0;
	padding: 0;
	border: 0;
	font-size: 100%;
	font: inherit;
	vertical-align: baseline;
}
/* HTML5 display-role reset for older browsers */
article,
aside,
details,
figcaption,
figure,
footer,
header,
hgroup,
menu,
nav,
section {
	display: block;
}
body {
	line-height: 1;
}
ol,
ul {
	list-style: none;
}
blockquote,
q {
	quotes: none;
}
blockquote:before,
blockquote:after,
q:before,
q:after {
	content: '';
	content: none;
}
table {
	border-collapse: collapse;
	border-spacing: 0;
}

/* http://prismjs.com/download.html?themes=prism-okaidia&languages=clike+javascript+typescript&plugins=line-highlight+line-numbers */
/**
 * okaidia theme for JavaScript, CSS and HTML
 * Loosely based on Monokai textmate theme by http://www.monokai.nl/
 * @author ocodia
 */

code[class*='language-'],
pre[class*='language-'] {
	color: #f8f8f2;
	background: none;
	text-shadow: 0 1px rgba(0, 0, 0, 0.3);
	font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	word-wrap: normal;
	line-height: 1.5;

	-moz-tab-size: 4;
	-o-tab-size: 4;
	tab-size: 4;

	-webkit-hyphens: none;
	-moz-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
}

/* Code blocks */
pre[class*='language-'] {
	padding: 1em;
	margin: 0.5em 0;
	overflow: auto;
	border-radius: 0.3em;
}

:not(pre) > code[class*='language-'],
pre[class*='language-'] {
	background: #272822;
}

/* Inline code */
:not(pre) > code[class*='language-'] {
	padding: 0.1em;
	border-radius: 0.3em;
	white-space: normal;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
	color: slategray;
}

.token.punctuation {
	color: #f8f8f2;
}

.namespace {
	opacity: 0.7;
}

.token.property,
.token.tag,
.token.constant,
.token.symbol,
.token.deleted {
	color: #f92672;
}

.token.boolean,
.token.number {
	color: #ae81ff;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
	color: #a6e22e;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string,
.token.variable {
	color: #f8f8f2;
}

.token.atrule,
.token.attr-value,
.token.function {
	color: #e6db74;
}

.token.keyword {
	color: #66d9ef;
}

.token.regex,
.token.important {
	color: #fd971f;
}

.token.important,
.token.bold {
	font-weight: bold;
}
.token.italic {
	font-style: italic;
}

.token.entity {
	cursor: help;
}

pre[data-line] {
	position: relative;
	padding: 1em 0 1em 3em;
}

.line-highlight {
	position: absolute;
	left: 0;
	right: 0;
	padding: inherit 0;
	margin-top: 1em; /* Same as .prismâ€™s padding-top */

	background: hsla(24, 20%, 50%, 0.08);
	background: linear-gradient(to right, hsla(24, 20%, 50%, 0.1) 70%, hsla(24, 20%, 50%, 0));

	pointer-events: none;

	line-height: inherit;
	white-space: pre;
}

.line-highlight:before,
.line-highlight[data-end]:after {
	content: attr(data-start);
	position: absolute;
	top: 0.4em;
	left: 0.6em;
	min-width: 1em;
	padding: 0 0.5em;
	background-color: hsla(24, 20%, 50%, 0.4);
	color: hsl(24, 20%, 95%);
	font: bold 65%/1.5 sans-serif;
	text-align: center;
	vertical-align: 0.3em;
	border-radius: 999px;
	text-shadow: none;
	box-shadow: 0 1px white;
}

.line-highlight[data-end]:after {
	content: attr(data-end);
	top: auto;
	bottom: 0.4em;
}

pre.line-numbers {
	position: relative;
	padding-left: 3.8em;
	counter-reset: linenumber;
}

pre.line-numbers > code {
	position: relative;
	white-space: inherit;
}

.line-numbers .line-numbers-rows {
	position: absolute;
	pointer-events: none;
	top: 0;
	font-size: 100%;
	left: -3.8em;
	width: 3em; /* works for line-numbers below 1000 lines */
	letter-spacing: -1px;
	border-right: 1px solid #999;

	-webkit-user-select: none;
	-moz-user-select: none;
	-ms-user-select: none;
	user-select: none;
}

.line-numbers-rows > span {
	pointer-events: none;
	display: block;
	counter-increment: linenumber;
}

.line-numbers-rows > span:before {
	content: counter(linenumber);
	color: #999;
	display: block;
	padding-right: 0.8em;
	text-align: right;
}
</style>
      <script>/* http://prismjs.com/download.html?themes=prism-okaidia&languages=clike+javascript+typescript&plugins=line-highlight+line-numbers */
var _self=\\"undefined\\"!=typeof window?window:\\"undefined\\"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},Prism=function(){var e=/\\\\blang(?:uage)?-(\\\\w+)\\\\b/i,t=0,n=_self.Prism={manual:_self.Prism&&_self.Prism.manual,util:{encode:function(e){return e instanceof a?new a(e.type,n.util.encode(e.content),e.alias):\\"Array\\"===n.util.type(e)?e.map(n.util.encode):e.replace(/&/g,\\"&amp;\\").replace(/</g,\\"&lt;\\").replace(/\\\\u00a0/g,\\" \\")},type:function(e){return Object.prototype.toString.call(e).match(/\\\\[object (\\\\w+)\\\\]/)[1]},objId:function(e){return e.__id||Object.defineProperty(e,\\"__id\\",{value:++t}),e.__id},clone:function(e){var t=n.util.type(e);switch(t){case\\"Object\\":var a={};for(var r in e)e.hasOwnProperty(r)&&(a[r]=n.util.clone(e[r]));return a;case\\"Array\\":return e.map(function(e){return n.util.clone(e)})}return e}},languages:{extend:function(e,t){var a=n.util.clone(n.languages[e]);for(var r in t)a[r]=t[r];return a},insertBefore:function(e,t,a,r){r=r||n.languages;var i=r[e];if(2==arguments.length){a=arguments[1];for(var l in a)a.hasOwnProperty(l)&&(i[l]=a[l]);return i}var o={};for(var s in i)if(i.hasOwnProperty(s)){if(s==t)for(var l in a)a.hasOwnProperty(l)&&(o[l]=a[l]);o[s]=i[s]}return n.languages.DFS(n.languages,function(t,n){n===r[e]&&t!=e&&(this[t]=o)}),r[e]=o},DFS:function(e,t,a,r){r=r||{};for(var i in e)e.hasOwnProperty(i)&&(t.call(e,i,e[i],a||i),\\"Object\\"!==n.util.type(e[i])||r[n.util.objId(e[i])]?\\"Array\\"!==n.util.type(e[i])||r[n.util.objId(e[i])]||(r[n.util.objId(e[i])]=!0,n.languages.DFS(e[i],t,i,r)):(r[n.util.objId(e[i])]=!0,n.languages.DFS(e[i],t,null,r)))}},plugins:{},highlightAll:function(e,t){var a={callback:t,selector:'code[class*=\\"language-\\"], [class*=\\"language-\\"] code, code[class*=\\"lang-\\"], [class*=\\"lang-\\"] code'};n.hooks.run(\\"before-highlightall\\",a);for(var r,i=a.elements||document.querySelectorAll(a.selector),l=0;r=i[l++];)n.highlightElement(r,e===!0,a.callback)},highlightElement:function(t,a,r){for(var i,l,o=t;o&&!e.test(o.className);)o=o.parentNode;o&&(i=(o.className.match(e)||[,\\"\\"])[1].toLowerCase(),l=n.languages[i]),t.className=t.className.replace(e,\\"\\").replace(/\\\\s+/g,\\" \\")+\\" language-\\"+i,o=t.parentNode,/pre/i.test(o.nodeName)&&(o.className=o.className.replace(e,\\"\\").replace(/\\\\s+/g,\\" \\")+\\" language-\\"+i);var s=t.textContent,u={element:t,language:i,grammar:l,code:s};if(n.hooks.run(\\"before-sanity-check\\",u),!u.code||!u.grammar)return u.code&&(n.hooks.run(\\"before-highlight\\",u),u.element.textContent=u.code,n.hooks.run(\\"after-highlight\\",u)),n.hooks.run(\\"complete\\",u),void 0;if(n.hooks.run(\\"before-highlight\\",u),a&&_self.Worker){var g=new Worker(n.filename);g.onmessage=function(e){u.highlightedCode=e.data,n.hooks.run(\\"before-insert\\",u),u.element.innerHTML=u.highlightedCode,r&&r.call(u.element),n.hooks.run(\\"after-highlight\\",u),n.hooks.run(\\"complete\\",u)},g.postMessage(JSON.stringify({language:u.language,code:u.code,immediateClose:!0}))}else u.highlightedCode=n.highlight(u.code,u.grammar,u.language),n.hooks.run(\\"before-insert\\",u),u.element.innerHTML=u.highlightedCode,r&&r.call(t),n.hooks.run(\\"after-highlight\\",u),n.hooks.run(\\"complete\\",u)},highlight:function(e,t,r){var i=n.tokenize(e,t);return a.stringify(n.util.encode(i),r)},matchGrammar:function(e,t,a,r,i,l,o){var s=n.Token;for(var u in a)if(a.hasOwnProperty(u)&&a[u]){if(u==o)return;var g=a[u];g=\\"Array\\"===n.util.type(g)?g:[g];for(var c=0;c<g.length;++c){var h=g[c],f=h.inside,d=!!h.lookbehind,m=!!h.greedy,p=0,y=h.alias;if(m&&!h.pattern.global){var v=h.pattern.toString().match(/[imuy]*$/)[0];h.pattern=RegExp(h.pattern.source,v+\\"g\\")}h=h.pattern||h;for(var b=r,k=i;b<t.length;k+=t[b].length,++b){var w=t[b];if(t.length>e.length)return;if(!(w instanceof s)){h.lastIndex=0;var _=h.exec(w),P=1;if(!_&&m&&b!=t.length-1){if(h.lastIndex=k,_=h.exec(e),!_)break;for(var A=_.index+(d?_[1].length:0),j=_.index+_[0].length,x=b,O=k,S=t.length;S>x&&(j>O||!t[x].type&&!t[x-1].greedy);++x)O+=t[x].length,A>=O&&(++b,k=O);if(t[b]instanceof s||t[x-1].greedy)continue;P=x-b,w=e.slice(k,O),_.index-=k}if(_){d&&(p=_[1].length);var A=_.index+p,_=_[0].slice(p),j=A+_.length,N=w.slice(0,A),C=w.slice(j),E=[b,P];N&&(++b,k+=N.length,E.push(N));var I=new s(u,f?n.tokenize(_,f):_,y,_,m);if(E.push(I),C&&E.push(C),Array.prototype.splice.apply(t,E),1!=P&&n.matchGrammar(e,t,a,b,k,!0,u),l)break}else if(l)break}}}}},tokenize:function(e,t){var a=[e],r=t.rest;if(r){for(var i in r)t[i]=r[i];delete t.rest}return n.matchGrammar(e,a,t,0,0,!1),a},hooks:{all:{},add:function(e,t){var a=n.hooks.all;a[e]=a[e]||[],a[e].push(t)},run:function(e,t){var a=n.hooks.all[e];if(a&&a.length)for(var r,i=0;r=a[i++];)r(t)}}},a=n.Token=function(e,t,n,a,r){this.type=e,this.content=t,this.alias=n,this.length=0|(a||\\"\\").length,this.greedy=!!r};if(a.stringify=function(e,t,r){if(\\"string\\"==typeof e)return e;if(\\"Array\\"===n.util.type(e))return e.map(function(n){return a.stringify(n,t,e)}).join(\\"\\");var i={type:e.type,content:a.stringify(e.content,t,r),tag:\\"span\\",classes:[\\"token\\",e.type],attributes:{},language:t,parent:r};if(\\"comment\\"==i.type&&(i.attributes.spellcheck=\\"true\\"),e.alias){var l=\\"Array\\"===n.util.type(e.alias)?e.alias:[e.alias];Array.prototype.push.apply(i.classes,l)}n.hooks.run(\\"wrap\\",i);var o=Object.keys(i.attributes).map(function(e){return e+'=\\"'+(i.attributes[e]||\\"\\").replace(/\\"/g,\\"&quot;\\")+'\\"'}).join(\\" \\");return\\"<\\"+i.tag+' class=\\"'+i.classes.join(\\" \\")+'\\"'+(o?\\" \\"+o:\\"\\")+\\">\\"+i.content+\\"</\\"+i.tag+\\">\\"},!_self.document)return _self.addEventListener?(_self.addEventListener(\\"message\\",function(e){var t=JSON.parse(e.data),a=t.language,r=t.code,i=t.immediateClose;_self.postMessage(n.highlight(r,n.languages[a],a)),i&&_self.close()},!1),_self.Prism):_self.Prism;var r=document.currentScript||[].slice.call(document.getElementsByTagName(\\"script\\")).pop();return r&&(n.filename=r.src,n.manual||r.hasAttribute(\\"data-manual\\")||(\\"loading\\"!==document.readyState?window.requestAnimationFrame?window.requestAnimationFrame(n.highlightAll):window.setTimeout(n.highlightAll,16):document.addEventListener(\\"DOMContentLoaded\\",n.highlightAll))),_self.Prism}();\\"undefined\\"!=typeof module&&module.exports&&(module.exports=Prism),\\"undefined\\"!=typeof global&&(global.Prism=Prism);
Prism.languages.clike={comment:[{pattern:/(^|[^\\\\\\\\])\\\\/\\\\*[\\\\s\\\\S]*?(?:\\\\*\\\\/|$)/,lookbehind:!0},{pattern:/(^|[^\\\\\\\\:])\\\\/\\\\/.*/,lookbehind:!0}],string:{pattern:/([\\"'])(\\\\\\\\(?:\\\\r\\\\n|[\\\\s\\\\S])|(?!\\\\1)[^\\\\\\\\\\\\r\\\\n])*\\\\1/,greedy:!0},\\"class-name\\":{pattern:/((?:\\\\b(?:class|interface|extends|implements|trait|instanceof|new)\\\\s+)|(?:catch\\\\s+\\\\())[a-z0-9_\\\\.\\\\\\\\]+/i,lookbehind:!0,inside:{punctuation:/(\\\\.|\\\\\\\\)/}},keyword:/\\\\b(if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\\\\b/,\\"boolean\\":/\\\\b(true|false)\\\\b/,\\"function\\":/[a-z0-9_]+(?=\\\\()/i,number:/\\\\b-?(?:0x[\\\\da-f]+|\\\\d*\\\\.?\\\\d+(?:e[+-]?\\\\d+)?)\\\\b/i,operator:/--?|\\\\+\\\\+?|!=?=?|<=?|>=?|==?=?|&&?|\\\\|\\\\|?|\\\\?|\\\\*|\\\\/|~|\\\\^|%/,punctuation:/[{}[\\\\];(),.:]/};
Prism.languages.javascript=Prism.languages.extend(\\"clike\\",{keyword:/\\\\b(as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|var|void|while|with|yield)\\\\b/,number:/\\\\b-?(0[xX][\\\\dA-Fa-f]+|0[bB][01]+|0[oO][0-7]+|\\\\d*\\\\.?\\\\d+([Ee][+-]?\\\\d+)?|NaN|Infinity)\\\\b/,\\"function\\":/[_$a-zA-Z\\\\xA0-\\\\uFFFF][_$a-zA-Z0-9\\\\xA0-\\\\uFFFF]*(?=\\\\()/i,operator:/-[-=]?|\\\\+[+=]?|!=?=?|<<?=?|>>?>?=?|=(?:==?|>)?|&[&=]?|\\\\|[|=]?|\\\\*\\\\*?=?|\\\\/=?|~|\\\\^=?|%=?|\\\\?|\\\\.{3}/}),Prism.languages.insertBefore(\\"javascript\\",\\"keyword\\",{regex:{pattern:/(^|[^\\\\/])\\\\/(?!\\\\/)(\\\\[[^\\\\]\\\\r\\\\n]+]|\\\\\\\\.|[^\\\\/\\\\\\\\\\\\[\\\\r\\\\n])+\\\\/[gimyu]{0,5}(?=\\\\s*($|[\\\\r\\\\n,.;})]))/,lookbehind:!0,greedy:!0}}),Prism.languages.insertBefore(\\"javascript\\",\\"string\\",{\\"template-string\\":{pattern:/\`(?:\\\\\\\\\\\\\\\\|\\\\\\\\?[^\\\\\\\\])*?\`/,greedy:!0,inside:{interpolation:{pattern:/\\\\$\\\\{[^}]+\\\\}/,inside:{\\"interpolation-punctuation\\":{pattern:/^\\\\$\\\\{|\\\\}$/,alias:\\"punctuation\\"},rest:Prism.languages.javascript}},string:/[\\\\s\\\\S]+/}}}),Prism.languages.markup&&Prism.languages.insertBefore(\\"markup\\",\\"tag\\",{script:{pattern:/(<script[\\\\s\\\\S]*?>)[\\\\s\\\\S]*?(?=<\\\\/script>)/i,lookbehind:!0,inside:Prism.languages.javascript,alias:\\"language-javascript\\"}}),Prism.languages.js=Prism.languages.javascript;
Prism.languages.typescript=Prism.languages.extend(\\"javascript\\",{keyword:/\\\\b(as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|var|void|while|with|yield|false|true|module|declare|constructor|string|Function|any|number|boolean|Array|enum|symbol|namespace|abstract|require|type)\\\\b/}),Prism.languages.ts=Prism.languages.typescript;
!function(){function e(e,t){return Array.prototype.slice.call((t||document).querySelectorAll(e))}function t(e,t){return t=\\" \\"+t+\\" \\",(\\" \\"+e.className+\\" \\").replace(/[\\\\n\\\\t]/g,\\" \\").indexOf(t)>-1}function n(e,n,i){for(var o,a=n.replace(/\\\\s+/g,\\"\\").split(\\",\\"),l=+e.getAttribute(\\"data-line-offset\\")||0,d=r()?parseInt:parseFloat,c=d(getComputedStyle(e).lineHeight),s=0;o=a[s++];){o=o.split(\\"-\\");var u=+o[0],m=+o[1]||u,h=document.createElement(\\"div\\");h.textContent=Array(m-u+2).join(\\" \\\\n\\"),h.setAttribute(\\"aria-hidden\\",\\"true\\"),h.className=(i||\\"\\")+\\" line-highlight\\",t(e,\\"line-numbers\\")||(h.setAttribute(\\"data-start\\",u),m>u&&h.setAttribute(\\"data-end\\",m)),h.style.top=(u-l-1)*c+\\"px\\",t(e,\\"line-numbers\\")?e.appendChild(h):(e.querySelector(\\"code\\")||e).appendChild(h)}}function i(){var t=location.hash.slice(1);e(\\".temporary.line-highlight\\").forEach(function(e){e.parentNode.removeChild(e)});var i=(t.match(/\\\\.([\\\\d,-]+)$/)||[,\\"\\"])[1];if(i&&!document.getElementById(t)){var r=t.slice(0,t.lastIndexOf(\\".\\")),o=document.getElementById(r);o&&(o.hasAttribute(\\"data-line\\")||o.setAttribute(\\"data-line\\",\\"\\"),n(o,i,\\"temporary \\"),document.querySelector(\\".temporary.line-highlight\\").scrollIntoView())}}if(\\"undefined\\"!=typeof self&&self.Prism&&self.document&&document.querySelector){var r=function(){var e;return function(){if(\\"undefined\\"==typeof e){var t=document.createElement(\\"div\\");t.style.fontSize=\\"13px\\",t.style.lineHeight=\\"1.5\\",t.style.padding=0,t.style.border=0,t.innerHTML=\\"&nbsp;<br />&nbsp;\\",document.body.appendChild(t),e=38===t.offsetHeight,document.body.removeChild(t)}return e}}(),o=0;Prism.hooks.add(\\"before-sanity-check\\",function(t){var n=t.element.parentNode,i=n&&n.getAttribute(\\"data-line\\");if(n&&i&&/pre/i.test(n.nodeName)){var r=0;e(\\".line-highlight\\",n).forEach(function(e){r+=e.textContent.length,e.parentNode.removeChild(e)}),r&&/^( \\\\n)+$/.test(t.code.slice(-r))&&(t.code=t.code.slice(0,-r))}}),Prism.hooks.add(\\"complete\\",function(e){var t=e.element.parentNode,r=t&&t.getAttribute(\\"data-line\\");t&&r&&/pre/i.test(t.nodeName)&&(clearTimeout(o),n(t,r),o=setTimeout(i,1))}),window.addEventListener(\\"hashchange\\",i)}}();
!function(){if(\\"undefined\\"!=typeof self&&self.Prism&&self.document){var e=\\"line-numbers\\",t=function(e){var t=n(e),r=t[\\"white-space\\"];if(\\"pre-wrap\\"===r||\\"pre-line\\"===r){var s=e.querySelector(\\"code\\"),l=e.querySelector(\\".line-numbers-rows\\"),a=e.querySelector(\\".line-numbers-sizer\\"),i=e.textContent.split(\\"\\\\n\\");a||(a=document.createElement(\\"span\\"),a.className=\\"line-numbers-sizer\\",s.appendChild(a)),a.style.display=\\"block\\",i.forEach(function(e,t){a.textContent=e||\\"\\\\n\\";var n=a.getBoundingClientRect().height;l.children[t].style.height=n+\\"px\\"}),a.textContent=\\"\\",a.style.display=\\"none\\"}},n=function(e){return e?window.getComputedStyle?getComputedStyle(e):e.currentStyle||null:null};window.addEventListener(\\"resize\\",function(){Array.prototype.forEach.call(document.querySelectorAll(\\"pre.\\"+e),t)}),Prism.hooks.add(\\"complete\\",function(e){if(e.code){var n=e.element.parentNode,r=/\\\\s*\\\\bline-numbers\\\\b\\\\s*/;if(n&&/pre/i.test(n.nodeName)&&(r.test(n.className)||r.test(e.element.className))&&!e.element.querySelector(\\".line-numbers-rows\\")){r.test(e.element.className)&&(e.element.className=e.element.className.replace(r,\\" \\")),r.test(n.className)||(n.className+=\\" line-numbers\\");var s,l=e.code.match(/\\\\n(?!$)/g),a=l?l.length+1:1,i=new Array(a+1);i=i.join(\\"<span></span>\\"),s=document.createElement(\\"span\\"),s.setAttribute(\\"aria-hidden\\",\\"true\\"),s.className=\\"line-numbers-rows\\",s.innerHTML=i,n.hasAttribute(\\"data-start\\")&&(n.style.counterReset=\\"linenumber \\"+(parseInt(n.getAttribute(\\"data-start\\"),10)-1)),e.element.appendChild(s),t(n)}}})}}();
</script>

      <style>
        body {
          background-color: #252526;
          color: #FFF;
          margin: 0;
          padding: 20px;
        }
        .error-message {
          font-family: Consolas, fixed;
          font-size: 120%;
          margin-bottom: 20px;
          border-radius: 5px 5px 0 0;
          display: flex;
          overflow: hidden;
        }
        .error-message__name {
          padding: 20px;
          background-color: #600;
        }
        .error-message__message {
          padding: 20px;
          background-color: #900;
          flex-grow: 1;
        }
        .error-info {
          background-color: #1E1E1E;
          border-radius: 0 0 5px 5px;
          margin-bottom: 20px;
        }
        .error-details {
          white-space: pre;
          font-family: Consolas, fixed;
          font-size: 80%;
          padding: 20px;
          background-color: #111;
        }
        .stack-trace {
          font-family: Consolas, fixed;
          padding: 20px;
        }
        .stack-line {

        }
        .stack-line__match,
        .stack-line__column {
          display: none;
        }
        .stack-frame {
          background-color: #1E1E1E;
          padding: 0;
          margin-bottom: 20px;
          border-radius: 5px;
          overflow: hidden;
        }
        .source-file {
          font-weight: bold;
          font-family: Consolas, fixed;
          padding: 8px 10px;
          background-color: #000;
        }
        .source-file__filename {
          text-decoration: underline;
        }
        .source-lines {
          font-family: Consolas, fixed;
          padding: 0;
          margin: 0;
          color: #5A5A5A;
        }
        .source-lines__line {
          padding: 5px 10px;
          margin: 0;
          white-space: pre;
          list-style: decimal inside none;
        }
        .source-lines__line span {
          color: #FFF;
        }
        .source-lines__line--main {
          background-color: #111;
        }
        .no-context {
          padding: 20px;
        }
        .source-code {
          padding-left: 0 !important;
          margin: 0 !important;
          background-color: transparent !important;
        }
        .source-code code {
          display: inline-block;
        }
      </style>
    </head>
    <body>
      <div class=\\"error-info\\">
        <div class=\\"error-message\\">
          <div class=\\"error-message__name\\">Error</div>
          <div class=\\"error-message__message\\">Thrown error message</div>
        </div>
        
    <ol class=\\"stack-trace\\">
      
    <li>
      <span class=\\"stack-line__source\\">src/example/app.ts:42</span>
      <span class=\\"stack-line__method\\">(app.get)</span>
    </li>
  
    </ol>
  
        
      </div>
      
    <div class=\\"stack-frame\\">
      <div class=\\"source-file\\">
        <span class=\\"source-file__index\\">#1</span>
        <span class=\\"source-file__filename\\">src/example/app.ts</span>:<span class=\\"source-file__line\\">44</span>
      </div>
      
    <pre class=\\"source-code line-numbers\\" data-start=\\"24\\" data-line=\\"21\\">
      <code class=\\"language-typescript\\">  // add json body parser
  app.use(bodyParser.json());

  // index endpoint
  app.get(\\"/\\", (_request, response, _next) => {
    response.send(\`
      <ul>
        <li><a href=\\"/throw-error\\">Throw error</a></li>
        <li><a href=\\"/next-error\\">Next error</a></li>
        <li><a href=\\"/object-error\\">Object error</a></li>
        <li><a href=\\"/detailed-error\\">Detailed error</a></li>
        <li><a href=\\"/cyclic-error\\">Cyclic error</a></li>
      </ul>
    \`);
  });

  // throws an error
  app.get(\\"/throw-error\\", (_request, _response, _next) => {
    throw new Error(\\"Thrown error message\\");
  });

  // forwards an error
  app.get(\\"/next-error\\", (_request, _response, next) => {
    next(new Error(\\"Forwarded error message\\"));
  });

  // object error
  app.get(\\"/object-error\\", (_request, _response, next) => {
    next({
      message: \\"Test message\\",
    });
  });

  // detailed error
  app.get(\\"/detailed-error\\", (_request, _response, next) => {
    next(
      new DetailedError(\\"Cyclic error\\", {
        foo: \\"bar\\",
      }),
    );
  });</code></pre>
  
    </div>
  
    </body>
    </html>
  "
`;

exports[`create-user-route should return valid index endpoint result 1`] = `
"
      <ul>
        <li><a href=\\"/throw-error\\">Throw error</a></li>
        <li><a href=\\"/next-error\\">Next error</a></li>
        <li><a href=\\"/object-error\\">Object error</a></li>
        <li><a href=\\"/detailed-error\\">Detailed error</a></li>
        <li><a href=\\"/cyclic-error\\">Cyclic error</a></li>
      </ul>
    "
`;

exports[`create-user-route xhr error formatter accepts error without stack 1`] = `
Object {
  "error": "Error message",
  "stack": Array [],
}
`;
